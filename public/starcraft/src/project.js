window.__require=function t(e,n,o){function r(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return r(e[a][1][t]||t)},l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({action_manager:[function(t,e,n){"use strict";cc._RF.push(e,"bc64cMdnoRKmrpzacjrT9sE","action_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.showDialog=function(t,e){t.active=!0,t.opacity=255,t.scale=.5,(new cc.Tween).target(t).to(.2,{scale:1},cc.easeElasticOut(1)).start(),e&&(e.opacity=0,e.scale=5,(new cc.Tween).target(e).to(.2,{opacity:210},cc.easeIn(1)).start())},e.prototype.showFullPage=function(t){t.opacity=0,t.active=!0,(new cc.Tween).target(t).to(.2,{opacity:255},cc.easeIn(1)).start()},e.prototype.hideUI=function(t){(new cc.Tween).target(t).to(.2,{opacity:0},null).call(function(){t.active=!1}).start()},e._instance=null,e=n=r([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],audio_manager:[function(t,e,n){"use strict";cc._RF.push(e,"c1fabvqO+FO16BlTXQLZRTj","audio_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sourceMaps={},e.isOpenBGM=!1,e.DEFAULT_VOLUME=1,e.BGM_VOLUME=.8,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.loadAudioClip=function(t,e){var n=this;void 0===e&&(e=this.DEFAULT_VOLUME),cc.loader.loadRes("sound/"+t,function(o,r){n.sourceMaps[t]=r,cc.audioEngine.setEffectsVolume(e),cc.audioEngine.playEffect(r,!1)})},e.prototype.loadBGMClip=function(t,e){var n=this;void 0===e&&(e=this.DEFAULT_VOLUME),cc.loader.loadRes("bgm/"+t,function(o,r){n.sourceMaps[t]=r,cc.audioEngine.setMusicVolume(e),cc.audioEngine.playMusic(r,!0)})},e.prototype.playAudio=function(t,e){if(void 0===e&&(e=this.DEFAULT_VOLUME),this.sourceMaps[t]){var n=this.sourceMaps[t];cc.audioEngine.setEffectsVolume(e),cc.audioEngine.playEffect(n,!1)}else this.loadAudioClip(t)},e.prototype.playBGMByID=function(t,e){void 0===e&&(e=this.BGM_VOLUME),this.isOpenBGM&&cc.audioEngine.stopMusic(),this.isOpenBGM=!0;var n="bgm_"+(t+1);if(this.sourceMaps[n]){var o=this.sourceMaps[n];cc.audioEngine.setMusicVolume(e),cc.audioEngine.playMusic(o,!0)}else this.loadBGMClip(n)},e.prototype.stopBGM=function(){this.isOpenBGM&&(cc.audioEngine.stopMusic(),this.isOpenBGM=!1)},e.instance=null,e=n=r([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],bullet:[function(t,e,n){"use strict";cc._RF.push(e,"c74265DSBtE/Kfug6v7BMh3","bullet");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../manager/pool_manager"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1500,e}return o(e,t),e.prototype.update=function(t){(this.node.x>=600||this.node.x<=-600)&&this.putInPool(),this.node.x+=this.speed*t},e.prototype.init=function(t,e,n){this.node.y=2===n||3===n?10:0,this.speed=1500*t,this.node.scaleX=-t,this.node.x=e+30*t},e.prototype.putInPool=function(){i.default.instance.removeObjectByName("bullet",this.node)},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../manager/pool_manager":"pool_manager"}],config:[function(t,e,n){"use strict";cc._RF.push(e,"f52bc6qdE9IyqvGOXLVM1dX","config"),Object.defineProperty(n,"__esModule",{value:!0});var o={player_run:{sample:3,speed:3,wrapMode:cc.WrapMode.Loop},player_reload:{sample:2,speed:2,wrapMode:cc.WrapMode.Loop,funcs:[{frame:2,func:"onStay",param:[]}]},monster_run:{sample:2,speed:3,wrapMode:cc.WrapMode.Loop},monster_fail:{sample:4,speed:1.5,wrapMode:cc.WrapMode.LoopReverse},monster_die:{sample:3,speed:3,wrapMode:cc.WrapMode.Loop,funcs:[{frame:3,func:"putInPool",param:[]}]},player_win:{sample:2,speed:2,wrapMode:cc.WrapMode.Loop}};n.default={animaParams:o,uiName:{messageBox:"messagebox_ui",winPage:"winPage",failPage:"failPage"},resConfig:{altasArr:["main"],jsonArr:[],prefabArr:["bullet","zergling","flash"]}},cc._RF.pop()},{}],dynamic_data_manager:[function(t,e,n){"use strict";cc._RF.push(e,"20dbctJiIFCAJ7mmTeOhSRR","dynamic_data_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e._instance=null,e=n=r([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],emmiter:[function(t,e,n){"use strict";cc._RF.push(e,"4d169zj4plH+ZBj1kxBK6vn","emmiter"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.register=function(e,n,o){t.listeners[e]||(t.listeners[e]=[]),t.listeners[e].push(new r(n,o))},t.remove=function(e,n){var o=t.listeners[e];if(o){for(var r=o.length,i=0;i<r;i++){if(o[i].compar(n)){o.splice(i,1);break}}0==o.length&&delete t.listeners[e]}},t.fire=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=t.listeners[e];if(r)for(var i=r.length,a=0;a<i;a++){var c=r[a];c.notify.apply(c,[e].concat(n))}},t.listeners={},t}();n.Emitter=o;var r=function(){function t(t,e){this.callback=null,this.context=null;this.callback=t,this.context=e}return t.prototype.notify=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.callback).call.apply(t,[this.context].concat(e))},t.prototype.compar=function(t){return t==this.context},t}();cc._RF.pop()},{}],enum:[function(t,e,n){"use strict";cc._RF.push(e,"c20f3923+tFm7cvPs5ySN+5","enum"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.unkonw=0]="unkonw",t[t.loading=1]="loading",t[t.loadSuccess=2]="loadSuccess"}(n.ResLoadStatus||(n.ResLoadStatus={})),function(t){t[t.common=0]="common",t[t.bg=1]="bg"}(n.ResType||(n.ResType={})),function(t){t[t.pause=0]="pause",t[t.running=1]="running"}(n.GameStatus||(n.GameStatus={})),cc._RF.pop()},{}],fail_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"6d020z3TXNBaLKnhjUjtS0x","fail_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../manager/main_manager"),a=t("../utils/emmiter"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.restartBtn=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){var t=this;n.instance=this,this.node.active=!1,this.bindEvent(),a.Emitter.register("restart",function(){t.node.active=!1},this)},e.prototype.bindEvent=function(){this.restartBtn.node.on("click",function(){i.default.instance.onRestart()},this)},e.prototype.showUI=function(){this.node.active=!0},e.instance=null,r([u(cc.Button)],e.prototype,"restartBtn",void 0),e=n=r([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../manager/main_manager":"main_manager","../utils/emmiter":"emmiter"}],flash:[function(t,e,n){"use strict";cc._RF.push(e,"09fcd3h0F9Ato0i+cvWKDao","flash");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../manager/pool_manager"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lifetime=100,e.xOffset=50,e}return o(e,t),e.prototype.update=function(t){this.node.opacity-=20},e.prototype.init=function(t,e,n){var o=this;2===n||3===n?(this.node.y=10,this.xOffset=65):(this.node.y=0,this.xOffset=50),this.node.scaleX=-t,this.node.x=e+t*this.xOffset,this.node.opacity=255,setTimeout(function(){o.putInPool()},this.lifetime)},e.prototype.putInPool=function(){i.default.instance.removeObjectByName("flash",this.node)},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../manager/pool_manager":"pool_manager"}],json_manager:[function(t,e,n){"use strict";cc._RF.push(e,"77abfUSMMJB74jHj5I3vCIe","json_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../config"),a=t("./resouce_manager"),c=t("../utils/emmiter"),s=t("../utils/message"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Data=[],e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){for(var t=0;t<i.default.resConfig.jsonArr.length;t++)this._Data[t]=a.default.instance._Json[t].json;c.Emitter.fire("message_"+s.MessageType.jsonLoaded)},e.prototype.getDataByName=function(t){var e=i.default.resConfig.jsonArr.indexOf(t);if(-1!=e)return this._Data[e];console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e._instance=null,e=n=r([l],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resouce_manager":"resouce_manager"}],main_manager:[function(t,e,n){"use strict";cc._RF.push(e,"999bfq7w/xHQYtWqsUQsxm+","main_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/enum"),a=t("../ui/main_ui_manager"),c=t("../ui/fail_ui_manager"),s=t("./audio_manager"),u=t("../ui/win_ui_manager"),l=t("./ui_manager"),p=t("../../config"),f=t("../utils/emmiter"),d=t("../utils/utils"),m=cc._decorator,h=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=60,e.monsterSpawnRate=2,e.spawnTimer=null,e.speedBoostTimer=null,e.survivalTimer=null,e.status=i.GameStatus.pause,e.audioInterval=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){var t=this;setTimeout(function(){t.status===i.GameStatus.pause&&s.default.instance.playAudio("impatient")},1e4),n.instance=this,this.setDesignResolution(),setTimeout(function(){s.default.instance.playBGMByID(0)},100),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.director.getCollisionManager().enabled=!0},e.prototype.setDesignResolution=function(){},e.prototype.startGame=function(){var t=this;a.default.instance.init(),this.time=60,1===d.Utils.getRandomNumber(1)?s.default.instance.playAudio("TMaPss01"):s.default.instance.playAudio("marine-start2"),this.status=i.GameStatus.running;this.spawnTimer=setInterval(function(){if(t.status==i.GameStatus.running&&d.Utils.getRandomNumber(100)<Math.round(100*t.monsterSpawnRate*100/1e3)){var e=d.Utils.getRandomNumber(1);1===e?a.default.instance.createMonster("right"):0===e&&a.default.instance.createMonster("left")}},100),this.speedBoostTimer=setInterval(function(){t.status===i.GameStatus.running&&(f.Emitter.fire("speedUp"),s.default.instance.playAudio("gogogo"),s.default.instance.playAudio("zergling-sound1"))},3e4),this.survivalTimer=setInterval(function(){t.status===i.GameStatus.running&&(t.time>0?t.time-=1:t.onWin())},1e3)},e.prototype.onKeyDown=function(t){if(this.status==i.GameStatus.running)switch(t.keyCode){case cc.macro.KEY.right:f.Emitter.fire("moveRight");break;case cc.macro.KEY.left:f.Emitter.fire("moveLeft");break;case cc.macro.KEY.a:f.Emitter.fire("fireBullet");break;case cc.macro.KEY.r:f.Emitter.fire("reload")}},e.prototype.onKeyUp=function(t){if(this.status==i.GameStatus.running)switch(t.keyCode){case cc.macro.KEY.right:f.Emitter.fire("standStill");case cc.macro.KEY.left:f.Emitter.fire("standStill")}},e.prototype.onWin=function(){this.status==i.GameStatus.running&&(s.default.instance.playAudio("yay"),f.Emitter.fire("win"),l.default.instance.openUI(u.default,{name:p.default.uiName.winPage}),this.status=i.GameStatus.pause)},e.prototype.onFail=function(){this.status==i.GameStatus.running&&(s.default.instance.playAudio("marine-death"),this.audioInterval=setInterval(function(){s.default.instance.playAudio("zergling-growl")},3e3),f.Emitter.fire("fail"),l.default.instance.openUI(c.default,{name:p.default.uiName.failPage}),this.status=i.GameStatus.pause)},e.prototype.onRestart=function(){f.Emitter.fire("restart"),clearInterval(this.spawnTimer),clearInterval(this.survivalTimer),clearInterval(this.audioInterval),clearInterval(this.speedBoostTimer),this.startGame()},e.instance=null,e=n=r([h],e)}(cc.Component));n.default=_,cc._RF.pop()},{"../../config":"config","../ui/fail_ui_manager":"fail_ui_manager","../ui/main_ui_manager":"main_ui_manager","../ui/win_ui_manager":"win_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/utils":"utils","./audio_manager":"audio_manager","./ui_manager":"ui_manager"}],main_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"3a4a8q8ADFI9Zhd9937yjsU","main_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/enum"),a=t("../actor/player"),c=t("../manager/main_manager"),s=t("../utils/utils"),u=t("../manager/pool_manager"),l=t("../actor/zergling"),p=t("../actor/bullet"),f=t("../actor/flash"),d=cc._decorator,m=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.timer=null,e.ammoCount=null,e.monsterContainer=null,e.bulletContainer=null,e.status=0,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.player.node.setPosition(0,-135),this.timer.getComponent(cc.Label).string="Survive for: "+s.Utils.getTimeFormat(c.default.instance.time),this.ammoCount.getComponent(cc.Label).string="Ammo left: "+String(this.player.magazineSize)},e.prototype.init=function(){this.status=i.GameStatus.running,this.player.node.setPosition(0,-135)},e.prototype.onWin=function(){this.status=i.GameStatus.pause},e.prototype.onFail=function(){this.status=i.GameStatus.pause},e.prototype.createMonster=function(t){void 0===t&&(t="right"),u.default.instance.createObjectByName("zergling",this.monsterContainer).getComponent(l.default).init(t)},e.prototype.createBullet=function(){u.default.instance.createObjectByName("bullet",this.bulletContainer).getComponent(p.default).init(this.player.node.scaleX,this.player.node.x,this.player.playerStatus)},e.prototype.createMuzzleFlash=function(){u.default.instance.createObjectByName("flash",this.bulletContainer).getComponent(f.default).init(this.player.node.scaleX,this.player.node.x,this.player.playerStatus)},e.prototype.update=function(t){this.status==i.GameStatus.running&&(this.timer.getComponent(cc.Label).string="Survive for: "+s.Utils.getTimeFormat(c.default.instance.time),this.ammoCount.getComponent(cc.Label).string="Ammo left: "+String(this.player.ammunition))},e.instance=null,r([h(a.default)],e.prototype,"player",void 0),r([h(cc.Node)],e.prototype,"timer",void 0),r([h(cc.Node)],e.prototype,"ammoCount",void 0),r([h(cc.Node)],e.prototype,"monsterContainer",void 0),r([h(cc.Node)],e.prototype,"bulletContainer",void 0),e=n=r([m],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../actor/bullet":"bullet","../actor/flash":"flash","../actor/player":"player","../actor/zergling":"zergling","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../utils/enum":"enum","../utils/utils":"utils"}],messagebox_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"239d3PabMVOWJLVGNBpGBfl","messagebox_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiNode=null,e.maskNode=null,e.labelTitle=null,e.labelDesc=null,e.buttonCancel=null,e.buttonConfirm=null,e.curCallBack=null,e.curParam=null,e._isClick=!1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.buttonCancel.node.on("click",this.cancel,this),this.buttonConfirm.node.on("click",this.confirm,this),this.uiNode.active&&(this.uiNode.active=!1)},e.prototype.showUI=function(t,e,n,o,r){void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=!0),this.uiNode.active=!0,this.labelTitle.string=t,this.labelDesc.string=e,this.curCallBack=null!=n?n:null,this.curParam=o,this.buttonCancel.node.active=!!r},e.prototype.cancel=function(){null!=this.curCallBack&&this.curCallBack(!1,this.curParam),this.hideUI()},e.prototype.confirm=function(){this._isClick||(this._isClick=!0,this.scheduleOnce(function(){this._isClick=!1},.2),null!=this.curCallBack&&this.curCallBack(!0,this.curParam),this.hideUI())},e.prototype.hideUI=function(){this.uiNode.active=!1},e.instance=null,r([c(cc.Node)],e.prototype,"uiNode",void 0),r([c(cc.Node)],e.prototype,"maskNode",void 0),r([c(cc.Label)],e.prototype,"labelTitle",void 0),r([c(cc.Label)],e.prototype,"labelDesc",void 0),r([c(cc.Button)],e.prototype,"buttonCancel",void 0),r([c(cc.Button)],e.prototype,"buttonConfirm",void 0),e=n=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],message:[function(t,e,n){"use strict";cc._RF.push(e,"e57005/Hr1GRb7uaOOSoOTZ","message"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.atlasLoaded=1]="atlasLoaded",t[t.poolLoaded=2]="poolLoaded",t[t.jsonLoaded=3]="jsonLoaded"}(n.MessageType||(n.MessageType={})),cc._RF.pop()},{}],player:[function(t,e,n){"use strict";cc._RF.push(e,"7ded1s5HgRNO4XbMUQ6/69e","player");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i,a=t("../manager/audio_manager"),c=t("../utils/emmiter"),s=t("../manager/resouce_manager"),u=t("../utils/enum"),l=t("../../config"),p=t("../ui/main_ui_manager"),f=cc._decorator,d=f.ccclass,m=f.property;(function(t){t[t.stay=1]="stay",t[t.moveLeft=2]="moveLeft",t[t.moveRight=3]="moveRight",t[t.reload=4]="reload"})(i||(i={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.movementSpeed=200,e.playerSprite=null,e.playerAnima=null,e.magazineSize=15,e.atkSpd=7,e.playerStatus=null,e.ammunition=e.magazineSize,e.attTimer=null,e.reloadTimer=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;c.Emitter.register("moveRight",this.moveRight,this),c.Emitter.register("moveLeft",this.moveLeft,this),c.Emitter.register("standStill",this.onStay,this),c.Emitter.register("fireBullet",this.onAtk,this),c.Emitter.register("reload",this.onReload,this),c.Emitter.register("win",function(){t.playerStatus=i.stay,t.playAnima("player_win")},this),c.Emitter.register("fail",function(){t.playerStatus=i.stay,t.playerAnima.stop(),t.playerSprite.spriteFrame=s.default.instance.getSprite(u.ResType.common,"die")},this),c.Emitter.register("restart",function(){t.playerStatus=i.stay,t.playerAnima.stop(),t.playerSprite.spriteFrame=s.default.instance.getSprite(u.ResType.common,"player"),t.ammunition=t.magazineSize},this),this.playerStatus=i.stay,this.ammunition=this.magazineSize},e.prototype.update=function(t){switch(this.playerStatus){case i.stay:break;case i.moveLeft:this.node.x>=-550&&(this.node.x-=t*this.movementSpeed);break;case i.moveRight:this.node.x<=550&&(this.node.x+=t*this.movementSpeed);break;case i.reload:}},e.prototype.onStay=function(){this.playerAnima.stop(),this.playerSprite.spriteFrame=s.default.instance.getSprite(u.ResType.common,"player"),this.playerStatus=i.stay},e.prototype.moveRight=function(){switch(this.playerStatus){case i.stay:this.node.scaleX=1,this.playerStatus=i.moveRight,this.playAnima("player_run");break;case i.moveLeft:this.node.scaleX=1,this.playerStatus=i.moveRight;break;case i.moveRight:case i.reload:}},e.prototype.moveLeft=function(){switch(this.playerStatus){case i.stay:this.node.scaleX=-1,this.playerStatus=i.moveLeft,this.playAnima("player_run");break;case i.moveLeft:break;case i.moveRight:this.playerStatus=i.moveLeft,this.node.scaleX=-1;break;case i.reload:}},e.prototype.onAtk=function(){var t=this;this.attTimer||(this.attTimer=setTimeout(function(){t.attTimer=null},1e3/this.atkSpd),this.ammunition>0&&this.playerStatus!=i.reload?(this.ammunition-=1,p.default.instance.createBullet(),p.default.instance.createMuzzleFlash(),a.default.instance.playAudio("fire")):this.ammunition<=0&&this.playerStatus!=i.reload&&this.onReload())},e.prototype.onReload=function(){var t=this;this.reloadTimer||(this.reloadTimer=setTimeout(function(){t.reloadTimer=null},500),this.playerStatus!=i.reload&&(this.playerStatus=i.reload,this.ammunition=this.magazineSize,this.playAnima("player_reload"),a.default.instance.playAudio("reload")))},e.prototype.playAnima=function(t){var e=this;this.playerAnima.getClips().some(function(e){return t==e.name})?this.playerAnima.play(t):s.default.instance.getAnimation(t,l.default.animaParams[t]).then(function(n){e.playerAnima.addClip(n),e.playerAnima.play(t)})},r([m(cc.Integer)],e.prototype,"movementSpeed",void 0),r([m(cc.Sprite)],e.prototype,"playerSprite",void 0),r([m(cc.Animation)],e.prototype,"playerAnima",void 0),r([m(cc.Integer)],e.prototype,"magazineSize",void 0),e=r([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../config":"config","../manager/audio_manager":"audio_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum"}],pool_manager:[function(t,e,n){"use strict";cc._RF.push(e,"8f7b3HT+t5GUqHoeKxyKxUp","pool_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../config"),a=t("./resouce_manager"),c=t("../utils/emmiter"),s=t("../utils/message"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Pool=[],e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){for(var t=0;t<i.default.resConfig.prefabArr.length;t++){this._Pool[t]=new cc.NodePool;var e=cc.instantiate(a.default.instance._Prefab[t]);this._Pool[t].put(e)}c.Emitter.fire("message_"+s.MessageType.poolLoaded)},e.prototype.createObjectByName=function(t,e){void 0===e&&(e=null);var n=i.default.resConfig.prefabArr.indexOf(t);if(-1!=n){var o,r=a.default.instance._Prefab[n],c=this._Pool[n];return null!=c&&(o=c.size()>0?c.get():cc.instantiate(r),e&&(o.parent=e)),o}console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e.prototype.removeObjectByName=function(t,e){var n=i.default.resConfig.prefabArr.indexOf(t);if(-1!=n){var o=this._Pool[n];null!=o?o.put(e):console.error("no this pool:"+t)}else console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e._instance=null,e=n=r([l],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resouce_manager":"resouce_manager"}],resouce_manager:[function(t,e,n){"use strict";cc._RF.push(e,"42f85+McylGCoytT6sxT/r3","resouce_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../config"),a=t("./json_manager"),c=t("./pool_manager"),s=t("../utils/emmiter"),u=t("../utils/message"),l=cc._decorator,p=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Atlas=[],e._Json=[],e._Prefab=[],e._Animation={},e.loading=0,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,console.log("ResourceManager loading ..."),this.bindEvent();var t=i.default.resConfig.altasArr.map(function(t){return"atlas/"+t}),e=this;cc.loader.loadResArray(t,cc.SpriteAtlas,function(t,n){t?console.error(t):(e._Atlas=n,s.Emitter.fire("message_"+u.MessageType.atlasLoaded))});var o=i.default.resConfig.jsonArr.map(function(t){return"json/"+t});cc.loader.loadResArray(o,cc.JsonAsset,function(t,n){t?console.error(t):(e._Json=n,a.default.instance.init())});var r=i.default.resConfig.prefabArr.map(function(t){return"prefab/"+t});cc.loader.loadResArray(r,cc.Prefab,function(t,n){t?console.error(t):(e._Prefab=n,c.default.instance.init())})},e.prototype.bindEvent=function(){s.Emitter.register("message_"+u.MessageType.atlasLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.atlasLoaded,"")},""),s.Emitter.register("message_"+u.MessageType.poolLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.poolLoaded,"")},""),s.Emitter.register("message_"+u.MessageType.jsonLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.jsonLoaded,"")},"")},e.prototype.loadedRes=function(){this.loading++,3==this.loading&&console.log("\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5")},e.prototype.getSprite=function(t,e){return this._Atlas[t]?this._Atlas[t].getSpriteFrame(e):null},e.prototype.getAnimation=function(t,e){var n=this;return new Promise(function(o,r){n._Animation[t]?o(n._Animation[t]):cc.loader.loadRes("animation/"+t,cc.SpriteAtlas,function(r,i){var a;if(r)console.error(r);else{var c=i.getSpriteFrames(),s=cc.AnimationClip.createWithSpriteFrames(c,c.length);s.name=t,s.sample=e.sample,s.speed=e.speed,s.wrapMode=e.wrapMode,e.funcs&&(a=s.events).push.apply(a,e.funcs),n._Animation[t]=s,o(s)}})})},e.instance=null,e=n=r([p],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./json_manager":"json_manager","./pool_manager":"pool_manager"}],start_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"1bad87hYZ1IprPxDnxeSgTn","start_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../manager/main_manager"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.startBtn=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.content.active=!0,this.startBtn.on("click",this.onGameStart,this)},e.prototype.onGameStart=function(){this.content.active=!1,i.default.instance.startGame()},e.instance=null,r([s(cc.Node)],e.prototype,"content",void 0),r([s(cc.Node)],e.prototype,"startBtn",void 0),e=n=r([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../manager/main_manager":"main_manager"}],tips_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"6b4009mxKhKIIMDg4O54np/","tips_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelDesc=null,e.contentNode=null,e.labelDesc2=null,e.contentNode2=null,e.labelDesc3=null,e.contentNode3=null,e.curShowIndex=1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.contentNode.opacity=0,this.contentNode2.opacity=0,this.contentNode3.opacity=0},e.prototype.showTipsByStr=function(t){this.showTipByIndex(t)},e.prototype.showTipByIndex=function(t){var e=cc.sequence(cc.delayTime(1.2),cc.fadeOut(.3));1==this.curShowIndex?(this.labelDesc.string=t,this.contentNode.stopAllActions(),this.contentNode.opacity=255,this.contentNode.runAction(e)):2==this.curShowIndex?(this.labelDesc2.string=t,this.contentNode2.stopAllActions(),this.contentNode2.opacity=255,this.contentNode2.runAction(e)):3==this.curShowIndex&&(this.labelDesc3.string=t,this.contentNode3.stopAllActions(),this.contentNode3.opacity=255,this.contentNode3.runAction(e)),this.curShowIndex++,this.curShowIndex>3&&(this.curShowIndex=1)},e.instance=null,r([c(cc.Label)],e.prototype,"labelDesc",void 0),r([c(cc.Node)],e.prototype,"contentNode",void 0),r([c(cc.Label)],e.prototype,"labelDesc2",void 0),r([c(cc.Node)],e.prototype,"contentNode2",void 0),r([c(cc.Label)],e.prototype,"labelDesc3",void 0),r([c(cc.Node)],e.prototype,"contentNode3",void 0),e=n=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"a70dcR6WJNEgZK++h1X0Vqy","ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../ui/messagebox_ui_manager"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keyLock={},e.keyLoadTime={},e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.loadUIRes=function(t,e,o){null==n.instance.keyLock[t]&&(n.instance.keyLock[t]=!1),0==n.instance.keyLock[t]&&(n.instance.keyLock[t]=!0,cc.loader.loadRes(t,cc.Prefab,function(r,i){if(null==r){var a=cc.instantiate(i);cc.director.getScene().getChildByName("Canvas").addChild(a,e),o(),n.instance.keyLoadTime[t]&&delete n.instance.keyLoadTime[t],delete n.instance.keyLock[t]}else console.error("\u52a0\u8f7d\u5931\u8d25",r,t),n.instance.keyLock[t]=!1}))},e.prototype.updateLoadTime=function(t){for(var e in this.keyLock)1==this.keyLock[e]&&(null==this.keyLoadTime[e]&&(this.keyLoadTime[e]=0),-1!=this.keyLoadTime[e]&&(this.keyLoadTime[e]+=t,this.keyLoadTime[e]>1&&this.keyLoadTime[e]<5||this.keyLoadTime[e]>5&&(this.keyLoadTime[e]=-1)))},e.prototype.checkUIIsOpen=function(t){return t.instance&&t.instance.content.active},e.prototype.openUI=function(t,e,o){var r;void 0===o&&(o=n.Z_ORDER_2),t.instance?(r=t.instance).showUI.apply(r,e.param):this.loadUIRes("ui/"+e.name,o,function(){var n;(n=t.instance).showUI.apply(n,e.param)})},e.prototype.LoadMessageBox=function(t,e,o,r,a){void 0===o&&(o=null),void 0===r&&(r=null),void 0===a&&(a=!0),i.default.instance?i.default.instance.showUI(t,e,o,r,a):this.loadUIRes("ui/message_ui",n.Z_ORDER_4+1,function(){i.default.instance.showUI(t,e,o,r,a)})},e._instance=null,e.Z_ORDER_1=100,e.Z_ORDER_2=200,e.Z_ORDER_3=300,e.Z_ORDER_4=400,e.Z_ORDER_5=500,e.Z_ORDER_6=600,e=n=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../ui/messagebox_ui_manager":"messagebox_ui_manager"}],utils:[function(t,e,n){"use strict";cc._RF.push(e,"b15dajOG6hAbLOIhxSqE9Zp","utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.deepCopy=function(t){var e=Array.isArray(t)?[]:{};for(var n in t)t.hasOwnProperty(n)&&("object"==typeof t[n]&&null!==t[n]?e[n]=this.deepCopy(t[n]):e[n]=t[n]);return e},t.arrFind=function(t,e,n){for(var o=0,r=t.length;o<r;o++)if(t[o][e]==n)return[t[o],o]},t.getPercentStr=function(t){var e=Number(100*t).toFixed(2);return e+="%"},t.orderBy=function(e,n){if(e.length<=1)return e;for(var o=Math.floor(e.length/2),r=e.splice(o,1)[0],i=[],a=[],c=0,s=e;c<s.length;c++){var u=s[c];n(u)<n(r)?i.push(u):a.push(u)}return t.orderBy(i,n).concat([r],t.orderBy(a,n))},t.getRandomNumber=function(t){return Math.round(Math.random()*t)},t.getLocalTime=function(t){var e={},n=new Date(1e3*t);return e.y=n.getFullYear(),e.m=n.getMonth()+1,e.d=n.getDate(),e},t.getJsonLength=function(t){var e=0;for(var n in t)e++;return e},t.printObj=function(t){var e="";for(var n in t){e+=n+" = "+t[n]+"\n"}console.log(e)},t.isContain=function(t,e){if(null!=t&&t.indexOf(e)>-1)return!0;return!1},t.isIn=function(t,e){if(null!=t)for(var n in t)if(t[n]==e)return n;return!1},t.getLargeNumStr=function(t){return t>=99999999?(t/1e8).toFixed(2)+"\u4ebf":t>=1e4?(t/1e4).toFixed(2)+"\u4e07":Math.floor(t).toString()},t.getTimeFormat=function(t){if(t<0)return"00:00";var e=Math.floor(t/60),n=Math.floor(t-60*e);return e<10&&n<10?"0"+e.toString()+":0"+n.toString():e<10&&n>=10?"0"+e.toString()+":"+n.toString():e>=10&&n<10?e.toString()+":0"+n.toString():e>=10&&n>=10?e.toString()+":"+n.toString():"00:00"},t.getTimeFromNowStr=function(t){if(t<=60)return"\u521a\u521a";var e=Math.floor(t/60),n=Math.floor(t/3600),o=Math.floor(t/84600);return o>=1?o+"\u5929\u4ee5\u524d":n>=1?n+"\u5c0f\u65f6\u4ee5\u524d":e>=1?e+"\u5206\u4ee5\u524d":void 0},t.shuffle=function(t){for(var e,n,o=t.length;o;)n=Math.floor(Math.random()*o--),e=t[o],t[o]=t[n],t[n]=e;return t},t.debounce=function(t,e){var n;return function(){var o=this,r=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)}},t.throttle=function(t,e){var n;return function(){var o=arguments;n||(t.apply(this,o),n=setTimeout(function(){n=null},e))}},t}();n.Utils=o,cc._RF.pop()},{}],win_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"47bcdCcVCBI/qpSlW6/Vamf","win_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../utils/emmiter"),a=t("../manager/main_manager"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.restartBtn=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){var t=this;n.instance=this,this.node.active=!1,this.bindEvent(),i.Emitter.register("restart",function(){t.node.active=!1},this)},e.prototype.bindEvent=function(){this.restartBtn.node.on("click",function(){a.default.instance.onRestart()},this)},e.prototype.showUI=function(){this.node.active=!0},e.instance=null,r([u(cc.Button)],e.prototype,"restartBtn",void 0),e=n=r([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../manager/main_manager":"main_manager","../utils/emmiter":"emmiter"}],zergling:[function(t,e,n){"use strict";cc._RF.push(e,"01edfc8vC9A2L5le2IqMv3L","zergling");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i,a=t("../utils/emmiter"),c=t("../manager/main_manager"),s=t("../manager/resouce_manager"),u=t("../../config"),l=t("../manager/pool_manager"),p=t("./bullet"),f=t("../manager/audio_manager"),d=t("../utils/utils"),m=cc._decorator,h=m.ccclass,_=m.property;(function(t){t[t.alive=1]="alive",t[t.dead=0]="dead"})(i||(i={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterAnima=null,e.speedBoost=1,e.speed=300,e.edge=580,e.MonsterStatus=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;a.Emitter.register("win",function(){t.MonsterStatus=i.dead,t.playAnima("monster_die")},this),a.Emitter.register("restart",function(){t.putInPool(),t.speedBoost=1},this),a.Emitter.register("speedUp",function(){t.speedBoost*=1.5},this)},e.prototype.update=function(t){this.MonsterStatus==i.alive&&((this.node.x>=650||this.node.x<=-650)&&this.putInPool(),this.node.x+=this.speed*this.speedBoost*t)},e.prototype.init=function(t){void 0===t&&(t="right");var e=d.Utils.getRandomNumber(100);switch(e<=5?f.default.instance.playAudio("zergling-spawn1"):e>5&&e<=10&&f.default.instance.playAudio("zergling-spawn2"),this.MonsterStatus=i.alive,this.playAnima("monster_run"),t){case"right":this.node.x=this.edge,this.node.scaleX=-1,this.speed=-300;break;case"left":this.node.x=-this.edge,this.node.scaleX=1,this.speed=300}},e.prototype.onDie=function(){this.speed=0,this.MonsterStatus=i.dead,f.default.instance.playAudio("zergling-death"),this.playAnima("monster_die")},e.prototype.playAnima=function(t){var e=this;this.monsterAnima.getClips().some(function(e){return t==e.name})?this.monsterAnima.play(t):s.default.instance.getAnimation(t,u.default.animaParams[t]).then(function(n){e.monsterAnima.addClip(n),e.monsterAnima.play(t)})},e.prototype.onCollisionEnter=function(t,e){this.MonsterStatus==i.alive&&("bullet"===t.node.name?(this.onDie(),t.node.getComponent(p.default).putInPool()):"player"===t.node.name&&(this.playAnima("monster_fail"),this.MonsterStatus=i.dead,c.default.instance.onFail()))},e.prototype.putInPool=function(){l.default.instance.removeObjectByName("zergling",this.node)},r([_(cc.Animation)],e.prototype,"monsterAnima",void 0),e=r([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../config":"config","../manager/audio_manager":"audio_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../manager/resouce_manager":"resouce_manager","../utils/emmiter":"emmiter","../utils/utils":"utils","./bullet":"bullet"}]},{},["config","bullet","flash","player","zergling","action_manager","audio_manager","dynamic_data_manager","json_manager","main_manager","pool_manager","resouce_manager","ui_manager","fail_ui_manager","main_ui_manager","messagebox_ui_manager","start_ui_manager","tips_ui_manager","win_ui_manager","emmiter","enum","message","utils"]);