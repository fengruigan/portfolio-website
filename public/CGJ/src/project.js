window.__require=function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({Joystick:[function(t,e,n){"use strict";cc._RF.push(e,"12ad3UC+7BEx42lmyW3SbKq","Joystick");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a,c,s=cc._decorator,u=s.ccclass,p=s.property;n.instance=new cc.EventTarget,function(t){t[t.FOUR=0]="FOUR",t[t.EIGHT=1]="EIGHT",t[t.ALL=2]="ALL"}(r=n.DirectionType||(n.DirectionType={})),function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.FAST=2]="FAST"}(a=n.SpeedType||(n.SpeedType={})),function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(c=n.JoystickType||(n.JoystickType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.ring=null,e.joystickType=c.FIXED,e.directionType=r.ALL,e._stickPos=null,e._touchLocation=null,e._radius=0,e}return o(e,t),e.prototype.onLoad=function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType===c.FOLLOW&&(this.node.opacity=0)},e.prototype.onEnable=function(){n.instance.on("set_joystick_type",this._onSetJoystickType,this)},e.prototype.onDisable=function(){n.instance.off("set_joystick_type",this._onSetJoystickType,this)},e.prototype._onSetJoystickType=function(t){this.joystickType=t,this.node.opacity=t===c.FIXED?255:0},e.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},e.prototype._touchStartEvent=function(t){n.instance.emit(cc.Node.EventType.TOUCH_START,t);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.joystickType===c.FIXED){this._stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition()).mag();this._radius>o&&this.dot.setPosition(e)}else this.joystickType===c.FOLLOW&&(this._stickPos=e,this.node.opacity=255,this._touchLocation=t.getLocation(),this.ring.setPosition(e),this.dot.setPosition(e))},e.prototype._touchMoveEvent=function(t){if(this.joystickType===c.FOLLOW&&this._touchLocation===t.getLocation())return!1;var e,o=this.ring.convertToNodeSpaceAR(t.getLocation()),i=o.mag(),r=this._stickPos.x+o.x,s=this._stickPos.y+o.y,u=cc.v2(r,s).sub(this.ring.getPosition()).normalize();if(this._radius>i)this.dot.setPosition(cc.v2(r,s)),e=a.NORMAL;else{var p=this._stickPos.x+u.x*this._radius,l=this._stickPos.y+u.y*this._radius;this.dot.setPosition(cc.v2(p,l)),e=a.FAST}n.instance.emit(cc.Node.EventType.TOUCH_MOVE,t,{speedType:e,moveDistance:u})},e.prototype._touchEndEvent=function(t){this.dot.setPosition(this.ring.getPosition()),this.joystickType===c.FOLLOW&&(this.node.opacity=0),n.instance.emit(cc.Node.EventType.TOUCH_END,t,{speedType:a.STOP})},i([p({type:cc.Node,displayName:"Dot",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"})],e.prototype,"dot",void 0),i([p({type:cc.Node,displayName:"Ring",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"})],e.prototype,"ring",void 0),i([p({type:cc.Enum(c),displayName:"Touch Type",tooltip:"\u89e6\u6478\u7c7b\u578b"})],e.prototype,"joystickType",void 0),i([p({type:cc.Enum(r),displayName:"Direction Type",tooltip:"\u65b9\u5411\u7c7b\u578b"})],e.prototype,"directionType",void 0),i([p({type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"})],e.prototype,"_stickPos",void 0),i([p({type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"})],e.prototype,"_touchLocation",void 0),i([p({tooltip:"\u534a\u5f84"})],e.prototype,"_radius",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],action_manager:[function(t,e,n){"use strict";cc._RF.push(e,"bc64cMdnoRKmrpzacjrT9sE","action_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.showDialog=function(t,e){t.active=!0,t.opacity=255,t.scale=.5,(new cc.Tween).target(t).to(.2,{scale:1},cc.easeElasticOut(1)).start(),e&&(e.opacity=0,e.scale=5,(new cc.Tween).target(e).to(.2,{opacity:210},cc.easeIn(1)).start())},e.prototype.showFullPage=function(t){t.opacity=0,t.active=!0,(new cc.Tween).target(t).to(.2,{opacity:255},cc.easeIn(1)).start()},e.prototype.hideUI=function(t){(new cc.Tween).target(t).to(.2,{opacity:0},null).call(function(){t.active=!1}).start()},e._instance=null,e=n=i([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],ant_item:[function(t,e,n){"use strict";cc._RF.push(e,"0ec543q3YlEdYbbq6BN6hrk","ant_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/emmiter"),a=t("../manager/way_point_manager"),c=t("../manager/main_manager"),s=t("../utils/enum"),u=t("../manager/pool_manager"),p=t("./bullet_item"),l=t("../manager/json_manager"),f=t("../utils/utils"),d=t("../manager/audio_manager"),m=t("./head_item"),h=t("../ui/main_ui_manager"),_=t("./prop_item"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=-50,e.heading=cc.Vec2.ZERO,e.lastWayPoint=null,e.isDie=!1,e._hp=null,e._freeze=!1,e.head=null,e.sp=null,e.spNode=null,e.hpProgress=null,e.freezeTimer=null,e}return o(e,t),Object.defineProperty(e.prototype,"freeze",{get:function(){return this._freeze},set:function(t){this._freeze=t,this.sp.node.color=t?new cc.Color(0,224,255):cc.Color.WHITE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){var e=this;(this._hp=t,this.hpProgress.progress=t/l.default.instance.getConfig("antHp"),t<=0)&&(this.isDie=!0,cc.tween(this.node).to(1,{scaleY:0},null).call(function(){u.default.instance.removeObjectByName("antItem",e.node)}).start(),0==f.Utils.getRandomNumber(49)&&u.default.instance.createObjectByName("propItem",h.default.instance.propParent).getComponent(_.default).init(0,this.node.position))},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){setInterval(function(){},3e3)},e.prototype.init=function(t){this.sp.node.color=cc.Color.WHITE,this.hp=l.default.instance.getConfig("antHp"),this.node.scaleY=1,this.node.setPosition(t.x,t.y-50),this.isDie=!1,this.freeze=!1;var e=l.default.instance.getConfig("antSpeed");this.speed=-e[0]+f.Utils.getRandomNumber(e[1])-10},e.prototype.antFreeze=function(){var t=this;clearInterval(this.freezeTimer),this.freeze=!0,this.freezeTimer=setTimeout(function(){t.freeze=!1},3e3)},e.prototype.update=function(t){if(c.default.instance.gameStatus==s.GameStatus.start&&!this.isDie){this.heading=this.node.position.sub(a.default.instance.player.node.getPosition());var e=this.heading.mag();this.heading=this.heading.normalize(),this.node.x+=this.heading.x*this.speed*t*(this.freeze?.75:1),this.node.y+=this.heading.y*this.speed*t*(this.freeze?.75:1),this.spNode.angle=(this.heading.y>0?1:-1)*this.heading.angle(cc.v2(1,0))*180/Math.PI+90,this.head.node.angle=this.spNode.angle;var n=-30*(this.heading.y>0?1:-1)*Math.sin(this.heading.angle(cc.v2(1,0))),o=-30*Math.cos(this.heading.angle(cc.v2(1,0)));this.head.node.x=o,this.head.node.y=n,e<=150&&r.Emitter.fire("warning")}},e.prototype.onCollisionEnter=function(t,e){this.isDie||("bulletItem"==t.node.name?(t.node.getComponent(p.default).onRemove(),this.hp-=l.default.instance.getDataByName("tower")[1].damage):"player"==t.node.name&&(d.default.instance.playAudio("\u8682\u8681\u54ac\u4eba"),u.default.instance.removeObjectByName("antItem",this.node)))},e.prototype.onCollisionStay=function(t,e){if("boxItem"==t.node.name){var n=180*t.node.getPosition().sub(e.node.getPosition()).angle(cc.v2(1,0))/Math.PI;n>45&&n<135?this.node.y-t.node.y<t.node.height/2+this.node.height/2&&(this.node.y<t.node.y?this.node.y=t.node.y-t.node.height/2-this.node.height/2:this.node.y=t.node.y+t.node.height/2+this.node.height/2):this.node.x-t.node.x<t.node.width/2+this.node.width/2&&(this.node.x<t.node.x?this.node.x=t.node.x-t.node.width/2-this.node.width/2:this.node.x=t.node.x+t.node.width/2+this.node.width/2)}},i([v(m.default)],e.prototype,"head",void 0),i([v(cc.Sprite)],e.prototype,"sp",void 0),i([v(cc.Node)],e.prototype,"spNode",void 0),i([v(cc.ProgressBar)],e.prototype,"hpProgress",void 0),e=i([g],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../manager/way_point_manager":"way_point_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum","../utils/utils":"utils","./bullet_item":"bullet_item","./head_item":"head_item","./prop_item":"prop_item"}],audio_manager:[function(t,e,n){"use strict";cc._RF.push(e,"c1fabvqO+FO16BlTXQLZRTj","audio_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sourceMaps={},e.isOpenBGM=!1,e.DEFAULT_VOLUME=.1,e.BGM_VOLUME=1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.loadAudioClip=function(t,e){var n=this;void 0===e&&(e=this.DEFAULT_VOLUME),cc.loader.loadRes("sound/"+t,function(o,i){n.sourceMaps[t]=i,cc.audioEngine.setEffectsVolume(e),cc.audioEngine.playEffect(i,!1)})},e.prototype.loadBGMClip=function(t,e){var n=this;void 0===e&&(e=this.DEFAULT_VOLUME),cc.loader.loadRes("bgm/"+t,function(o,i){n.sourceMaps[t]=i,cc.audioEngine.setMusicVolume(e),cc.audioEngine.playMusic(i,!0)})},e.prototype.playAudio=function(t,e){if(void 0===e&&(e=this.DEFAULT_VOLUME),this.sourceMaps[t]){var n=this.sourceMaps[t];cc.audioEngine.setEffectsVolume(e),cc.audioEngine.playEffect(n,!1)}else this.loadAudioClip(t,e)},e.prototype.playBGMByID=function(t,e){void 0===e&&(e=this.BGM_VOLUME),this.isOpenBGM&&cc.audioEngine.stopMusic(),this.isOpenBGM=!0;var n="bgm_"+(t+1);if(this.sourceMaps[n]){var o=this.sourceMaps[n];cc.audioEngine.setMusicVolume(e),cc.audioEngine.playMusic(o,!0)}else this.loadBGMClip(n,e)},e.prototype.stopBGM=function(){this.isOpenBGM&&(cc.audioEngine.stopMusic(),this.isOpenBGM=!1)},e.instance=null,e=n=i([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],box_item:[function(t,e,n){"use strict";cc._RF.push(e,"ae105Gv+YFJLrwkY+yTV5cE","box_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/emmiter"),a=t("../ui/main_ui_manager"),c=t("../utils/utils"),s=t("../manager/json_manager"),u=t("../manager/pool_manager"),p=t("./prop_item"),l=t("../manager/audio_manager"),f=t("../manager/way_point_manager"),d=cc._decorator,m=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vulnerable=0,e.distToPlayer=0,e.hpProgress=null,e._hp=3,e}return o(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){(this._hp=t,this.hpProgress.progress=t/3,this.hpProgress.node.opacity=3==t?0:150,t<=0)&&(l.default.instance.playAudio("\u7bb1\u5b50\u88ab\u7834\u574f"),u.default.instance.removeObjectByName("boxItem",this.node),0==c.Utils.getRandomNumber(49)&&u.default.instance.createObjectByName("propItem",a.default.instance.propParent).getComponent(p.default).init(0,this.node.position))},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){r.Emitter.register("pickUpBox",this.onPickUp,this)},e.prototype.init=function(){var t=this;this.hp=3;var e=s.default.instance.getConfig("itemGenerateRange"),n=s.default.instance.getConfig("playerPosition"),o=c.Utils.getRandomNumber(e[1])-e[1]/2+n[1];this.node.x=c.Utils.getRandomNumber(e[0])-e[0]/2+n[0],this.node.y=o+700,this.node.getComponent(cc.BoxCollider).enabled=!1,cc.tween(this.node).to(2,{y:o},cc.easeBounceOut()).call(function(){t.node.getComponent(cc.BoxCollider).enabled=!0}).start()},e.prototype.onPickUp=function(){this.node.setParent(a.default.instance.player.hand),this.node.setPosition(0,0)},e.prototype.onAttacked=function(){1==this.vulnerable&&(this.hp-=1,l.default.instance.playAudio("\u8682\u8681\u54ac\u7bb1\u5b50"))},e.prototype.update=function(t){this.distToPlayer=this.node.position.sub(f.default.instance.player.node.getPosition()).mag(),this.distToPlayer>=500?this.vulnerable=0:this.vulnerable=1},i([h(cc.ProgressBar)],e.prototype,"hpProgress",void 0),e=i([m],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/pool_manager":"pool_manager","../manager/way_point_manager":"way_point_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/utils":"utils","./prop_item":"prop_item"}],bullet_item:[function(t,e,n){"use strict";cc._RF.push(e,"c3b8c1xHjFIeZHFUeGfUndz","bullet_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/pool_manager"),a=t("../manager/main_manager"),c=t("../utils/enum"),s=t("../manager/json_manager"),u=cc._decorator,p=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=200,e.arr=null,e.particle=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e){this.speed=s.default.instance.getDataByName("tower")[1].bulletSpd,this.node.position=t,this.arr=e.normalize(),this.particle.resetSystem(),this.node.angle=(e.y>0?1:-1)*e.angle(cc.v2(1,0))*180/Math.PI,this.node.getComponent(cc.BoxCollider).enabled=!0},e.prototype.update=function(t){a.default.instance.gameStatus==c.GameStatus.start&&(this.node.x+=this.arr.x*t*this.speed,this.node.y+=this.arr.y*t*this.speed)},e.prototype.onRemove=function(){var t=this;this.node.getComponent(cc.BoxCollider).enabled=!1,this.particle.stopSystem(),setTimeout(function(){r.default.instance.removeObjectByName("bulletItem",t.node)},500)},i([l(cc.ParticleSystem)],e.prototype,"particle",void 0),e=i([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../utils/enum":"enum"}],config:[function(t,e,n){"use strict";cc._RF.push(e,"f52bc6qdE9IyqvGOXLVM1dX","config"),Object.defineProperty(n,"__esModule",{value:!0});var o={player_silder_run:{sample:5,speed:1,wrapMode:cc.WrapMode.Loop},player_idle:{sample:2,speed:.5,wrapMode:cc.WrapMode.Loop},player_success_run:{sample:6,speed:1,wrapMode:cc.WrapMode.Loop},player_success_idle:{sample:2,speed:.5,wrapMode:cc.WrapMode.Loop}};n.default={uiName:{messageBox:"messagebox_ui"},resConfig:{altasArr:["main"],jsonArr:["config","tower"],prefabArr:["antItem","boxItem","turrentItem","gapItem","bulletItem","iceItem","fireItem","grassItem","effectItem","propItem"]},aniConfig:o},cc._RF.pop()},{}],dynamic_data_manager:[function(t,e,n){"use strict";cc._RF.push(e,"20dbctJiIFCAJ7mmTeOhSRR","dynamic_data_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e._instance=null,e=n=i([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],effect_item:[function(t,e,n){"use strict";cc._RF.push(e,"021ddMU6VZI2LgJ3KgBT8WL","effect_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/pool_manager"),a=t("../utils/enum"),c=t("../manager/resouce_manager"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bagSp=null,e.particle=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e,n){var o=this;this.node.setPosition(t),this.bagSp.node.y=700-t.y,this.bagSp.spriteFrame=c.default.instance.getSprite(a.ResType.main,n),cc.tween(this.bagSp.node).to(1.5,{y:0},cc.easeBounceOut()).call(function(){o.particle.resetSystem(),e()}).delay(.4).call(function(){r.default.instance.removeObjectByName("effectItem",o.node)}).start()},i([p(cc.Sprite)],e.prototype,"bagSp",void 0),i([p(cc.ParticleSystem)],e.prototype,"particle",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../manager/pool_manager":"pool_manager","../manager/resouce_manager":"resouce_manager","../utils/enum":"enum"}],emmiter:[function(t,e,n){"use strict";cc._RF.push(e,"4d169zj4plH+ZBj1kxBK6vn","emmiter"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.register=function(e,n,o){t.listeners[e]||(t.listeners[e]=[]),t.listeners[e].push(new i(n,o))},t.remove=function(e,n){var o=t.listeners[e];if(o){for(var i=o.length,r=0;r<i;r++){if(o[r].compar(n)){o.splice(r,1);break}}0==o.length&&delete t.listeners[e]}},t.fire=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t.listeners[e];if(i)for(var r=i.length,a=0;a<r;a++){var c=i[a];c.notify.apply(c,[e].concat(n))}},t.listeners={},t}();n.Emitter=o;var i=function(){function t(t,e){this.callback=null,this.context=null;this.callback=t,this.context=e}return t.prototype.notify=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.callback).call.apply(t,[this.context].concat(e))},t.prototype.compar=function(t){return t==this.context},t}();cc._RF.pop()},{}],enum:[function(t,e,n){"use strict";cc._RF.push(e,"c20f3923+tFm7cvPs5ySN+5","enum"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.unkonw=0]="unkonw",t[t.loading=1]="loading",t[t.loadSuccess=2]="loadSuccess"}(n.ResLoadStatus||(n.ResLoadStatus={})),function(t){t[t.main=0]="main",t[t.bg=1]="bg"}(n.ResType||(n.ResType={})),function(t){t[t.unStart=0]="unStart",t[t.start=1]="start",t[t.success=2]="success",t[t.fail=3]="fail"}(n.GameStatus||(n.GameStatus={})),cc._RF.pop()},{}],fail_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"2e08aUxIdJD/59StkQip161","fail_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./main_ui_manager"),a=t("../manager/main_manager"),c=t("../manager/resouce_manager"),s=t("../utils/enum"),u=cc._decorator,p=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.restartBtn=null,e.successNode=null,e.successLabel=null,e.failNode=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.restartBtn.node.on("click",function(){n.instance.restart()},this),this.node.active=!1},e.prototype.restart=function(){this.node.active=!1,a.default.instance.startGame()},e.prototype.onFail=function(){this.node.active=!0,this.failNode.active=!0,this.successNode.active=!1},e.prototype.onSuccess=function(t){this.node.active=!0,this.failNode.active=!1,this.successNode.active=!0,this.successLabel.string=t?"\u8389\u8389\u4e1d\u7528\u7bb1\u5b50\u5835\u4e0a\u4e86\u6700\u540e\u4e00\u4e2a\u88c2\u7f1d\uff0c\u957f\u957f\u5730\u8212\u4e86\u4e00\u53e3\u6c14\uff0c\u5750\u5728\u4e86\u6905\u5b50\u4e0a\u3002\r\n\u9003\u8fc7\u4e00\u52ab\u4e86\u5462\uff0c\u8389\u8389\u4e1d\u5982\u662f\u60f3\u5230\uff0c\u96be\u5f97\u7684\u7a7a\u95f2\u8ba9\u8389\u8389\u4e1d\u5c45\u7136\u51fa\u73b0\u4e86\u4e00\u4e1d\u8ff7\u832b\uff0c\u5e0c\u671b\u4e00\u5207\u5b89\u597d\u5427\u3002\r\n\u8389\u8389\u4e1d\u5446\u5446\u5730\u770b\u7740\u88ab\u7bb1\u5b50\u5835\u4e0a\u7684\u88c2\u7f1d\uff0c\u770b\u7740\u88c2\u7f1d\u4e2d\u6162\u6162\u6e17\u5165\u7684\u7eff\u8272\u6c14\u4f53\uff0c\u773c\u4e2d\u7684\u4e16\u754c\u6e10\u6e10\u5931\u53bb\u8272\u5f69\u3002\u3002\u3002":"\u8389\u8389\u4e1d\u63a8\u5f00\u95e8\uff0c\u57ce\u5e02\u5df2\u662f\u6ee1\u76ee\u75ae\u75cd\uff0c\u5230\u5904\u90fd\u662f\u8682\u8681\u7684\u6495\u54ac\u58f0\u548c\u4eba\u4eec\u7684\u60e8\u53eb\u58f0\u3002\r\n\u7a81\u7136\uff0c\u8389\u8389\u4e1d\u542c\u5230\u4e86\u7535\u6d41\u58f0\uff0c\u4e0d\u8fdc\u5904\u6709\u4e00\u4e2a\u58eb\u5175\u7684\u5c38\u4f53\uff0c\u7535\u6d41\u58f0\u4ece\u5bf9\u8bb2\u673a\u4e2d\u4f20\u4e86\u51fa\u6765\uff0c\r\n\u8389\u8389\u4e1d\u5c06\u5bf9\u8bb2\u673a\u6361\u8d77\uff0c\u91cc\u9762\u4f20\u51fa\u4e86\u4e00\u4e2a\u4e2d\u5e74\u7537\u5b50\u7684\u58f0\u97f3\uff1a\r\n\u201c\u5404\u5355\u4f4d\u6ce8\u610f\uff0c\u5404\u5355\u4f4d\u6ce8\u610f\uff0c\u7a7f\u4e0a\u9632\u5316\u670d\uff0cM\u57ce\u6e05\u7406\u8ba1\u5212\u5373\u5c06\u5f00\u59cb\uff0c\u518d\u91cd\u590d\u4e00\u904d\u3002\u3002\u3002\u201d\uff0c\r\n\u8389\u8389\u4e1d\u62ac\u5934\uff0c\u6570\u67b6\u98de\u673a\u6b63\u671dM\u57ce\u98de\u6765\u3002\u3002\u3002",t&&(r.default.instance.player.playerAnima.stop(),r.default.instance.player.getComponent(cc.Sprite).spriteFrame=c.default.instance.getSprite(s.ResType.main,"chair"))},e.instance=null,i([l(cc.Button)],e.prototype,"restartBtn",void 0),i([l(cc.Node)],e.prototype,"successNode",void 0),i([l(cc.Label)],e.prototype,"successLabel",void 0),i([l(cc.Node)],e.prototype,"failNode",void 0),e=n=i([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/main_manager":"main_manager","../manager/resouce_manager":"resouce_manager","../utils/enum":"enum","./main_ui_manager":"main_ui_manager"}],fire_item:[function(t,e,n){"use strict";cc._RF.push(e,"af7b9NPBoNEW7P1fzSznSbA","fire_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/main_ui_manager"),a=t("../manager/main_manager"),c=t("../utils/enum"),s=t("./ant_item"),u=t("../manager/json_manager"),p=t("../manager/audio_manager"),l=cc._decorator,f=l.ccclass,d=l.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firePartic=null,e.range=150,e.attTimer=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){var e=this;clearInterval(this.attTimer),this.node.setPosition(t),this.range=u.default.instance.getDataByName("tower")[2].range1,this.attTimer=setInterval(function(){if(a.default.instance.gameStatus==c.GameStatus.start&&e.node.getComponent(cc.BoxCollider).enabled&&e.node.parent==r.default.instance.towerParent){var t=e.findAllAnt();t.length>0&&(e.firePartic.resetSystem(),t.map(function(t){t.getComponent(s.default).hp-=u.default.instance.getDataByName("tower")[2].damage}),p.default.instance.playAudio("\u706b\u67aa"))}},1e3)},e.prototype.findAllAnt=function(){for(var t=[],e=0;e<r.default.instance.antParent.children.length;e++){var n=r.default.instance.antParent.children[e];n.position.sub(this.node.position).mag()<this.range&&!n.getComponent(s.default).isDie&&t.push(n)}return t},i([d(cc.ParticleSystem)],e.prototype,"firePartic",void 0),e=i([f],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../ui/main_ui_manager":"main_ui_manager","../utils/enum":"enum","./ant_item":"ant_item"}],gap_item:[function(t,e,n){"use strict";cc._RF.push(e,"8ec89ucmwdD+YMJs2gWs3if","gap_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/pool_manager"),a=t("../ui/main_ui_manager"),c=t("./ant_item"),s=t("../manager/main_manager"),u=t("../utils/utils"),p=t("../utils/enum"),l=t("../manager/json_manager"),f=t("../manager/resouce_manager"),d=t("../manager/audio_manager"),m=cc._decorator,h=m.ccclass,_=m.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gapSprite=null,e.spriteNumber=1,e.antGrowTimer=null,e.isOn=!1,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(){var t=this;0==u.Utils.getRandomNumber(1)?(this.gapSprite.spriteFrame=f.default.instance.getSprite(p.ResType.main,"gap1"),this.spriteNumber=1):(this.gapSprite.spriteFrame=f.default.instance.getSprite(p.ResType.main,"gap2"),this.spriteNumber=2);var e=l.default.instance.getConfig("gapGenerateRange"),n=l.default.instance.getConfig("playerPosition");this.node.x=u.Utils.getRandomNumber(e[0])-e[0]/2+n[0],this.node.y=u.Utils.getRandomNumber(e[1])-e[1]/2+n[1],this.node.scale=0,cc.tween(this.node).to(1.5,{scale:.5},cc.easeCubicActionInOut()).start(),this.isOn=!0,clearInterval(this.antGrowTimer),this.antGrowTimer=setInterval(function(){s.default.instance.gameStatus==p.GameStatus.start&&t.isOn&&r.default.instance.createObjectByName("antItem",a.default.instance.antParent).getComponent(c.default).init(t.node.position)},1e3*l.default.instance.getConfig("antGrowTime"))},e.prototype.onCollisionEnter=function(t,e){1==this.isOn&&"boxItem"==t.node.name&&(this.isOn=!1,d.default.instance.playAudio("\u586b\u8865\u88c2\u7f1d"),a.default.instance.checkRealSuccess(),1==this.spriteNumber?this.gapSprite.spriteFrame=f.default.instance.getSprite(p.ResType.main,"gapfull1"):this.gapSprite.spriteFrame=f.default.instance.getSprite(p.ResType.main,"gapfull2"),r.default.instance.removeObjectByName("boxItem",t.node))},i([_(cc.Sprite)],e.prototype,"gapSprite",void 0),e=i([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/enum":"enum","../utils/utils":"utils","./ant_item":"ant_item"}],grass_item:[function(t,e,n){"use strict";cc._RF.push(e,"10a80RnAXdAjo/FLSxyQh9o","grass_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ant_item"),a=t("../manager/json_manager"),c=t("../manager/audio_manager"),s=cc._decorator,u=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundTimer=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){a.default.instance.getConfig("itemGenerateRange");this.node.setPosition(t)},e.prototype.onCollisionEnter=function(t,e){"antItem"==t.node.name&&(t.node.getComponent(r.default).speed*=a.default.instance.getDataByName("tower")[4].effect)},e.prototype.onCollisionStay=function(t,e){var n=this;if("antItem"==t.node.name){if(this.soundTimer)return;this.soundTimer=setTimeout(function(){n.soundTimer=null},500),c.default.instance.playAudio("\u6742\u8349")}},e.prototype.onCollisionExit=function(t,e){"ant"==t.node.name&&(t.node.getComponent(r.default).speed/=a.default.instance.getDataByName("tower")[4].effect)},e=i([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","./ant_item":"ant_item"}],guide_manager:[function(t,e,n){"use strict";cc._RF.push(e,"27804lGvBFH6IoCMu18gmSQ","guide_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/guide_ui_manager"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e.curStep=0,e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.openGuide=function(t){switch(this.curStep=t,r.default.instance.initUI(this.config[this.curStep]),this.config[this.curStep].type){case 0:r.default.instance.cb=this.config[this.curStep].func;break;case 1:case 2:this.config[this.curStep].func()}},e.prototype.nextGuide=function(){this.curStep+=1,this.openGuide(this.curStep)},e._instance=null,e=n=i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../ui/guide_ui_manager":"guide_ui_manager"}],guide_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"fb8aeTW2KNBpZEmxTOqrmyf","guide_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/guide_manager"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.targetNode=null,e.tipNode=null,e.target=null,e.btnLabel=null,e.tipLabel=null,e.cb=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.bindEvent(),this.targetNode.active=!1,this.tipNode.active=!1},e.prototype.bindEvent=function(){this.target.node.on("click",this.onNext,this)},e.prototype.initUI=function(t){this.content.active=!0,this.targetNode.active=!1,this.tipNode.active=!1,0==t.type?(this.targetNode.active=!0,this.btnLabel.string=t.str,this.targetNode.setPosition(t.pos)):1==t.type&&(this.tipNode.active=!0,this.tipLabel.string=t.str)},e.prototype.onNext=function(){this.cb(),this.hideUI(),r.default.instance.nextGuide()},e.prototype.showUI=function(){this.content.active=!0},e.prototype.hideUI=function(){this.content.active=!1},e.instance=null,i([s(cc.Node)],e.prototype,"content",void 0),i([s(cc.Node)],e.prototype,"targetNode",void 0),i([s(cc.Node)],e.prototype,"tipNode",void 0),i([s(cc.Button)],e.prototype,"target",void 0),i([s(cc.Label)],e.prototype,"btnLabel",void 0),i([s(cc.Label)],e.prototype,"tipLabel",void 0),e=n=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../manager/guide_manager":"guide_manager"}],hand_item:[function(t,e,n){"use strict";cc._RF.push(e,"a341cb0CjNDbZqrKJoOhhHA","hand_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/emmiter"),a=t("../ui/main_ui_manager"),c=t("../manager/audio_manager"),s=cc._decorator,u=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heading=cc.Vec2.ZERO,e.lastWayPoint=null,e.canTouchGroup=[],e.targetItem=null,e}return o(e,t),e.prototype.onLoad=function(){r.Emitter.register("pickUp",this.pickUp.bind(this),this)},e.prototype.showTouchTarget=function(){if(this.targetItem=null,this.canTouchGroup.map(function(t){t.opacity=255}),this.canTouchGroup.length>0)for(var t=0;t<this.canTouchGroup.length;t++)0==t?this.targetItem=this.canTouchGroup[t]:this.targetItem.position.sub(a.default.instance.player.node.position).mag()>this.canTouchGroup[t].position.sub(a.default.instance.player.node.position).mag()&&(this.targetItem=this.canTouchGroup[t]);this.targetItem&&(this.targetItem.opacity=200)},e.prototype.pickUp=function(){0==this.node.children.length?this.targetItem&&(this.targetItem.parent=this.node,this.targetItem.setPosition(0,0),this.targetItem.getComponent(cc.BoxCollider).enabled=!1,"boxItem"==this.node.children[0].name?c.default.instance.playAudio("\u62ff\u8d77\u548c\u653e\u4e0b"):c.default.instance.playAudio("\u9632\u5fa1\u5854\u6536\u8d77\u6765")):1==this.node.children.length&&(this.node.children[0].setPosition(a.default.instance.player.node.x-75*a.default.instance.player.node.scaleX,a.default.instance.player.node.y-30),this.node.children[0].getComponent(cc.BoxCollider).enabled=!0,"boxItem"==this.node.children[0].name?c.default.instance.playAudio("\u62ff\u8d77\u548c\u653e\u4e0b"):c.default.instance.playAudio("\u9632\u5fa1\u5854\u653e\u4e0b\u6765"),this.node.children[0].parent="boxItem"==this.node.children[0].name?a.default.instance.boxParent:a.default.instance.towerParent)},e.prototype.onCollisionEnter=function(t,e){this.canTouchGroup.push(t.node),this.showTouchTarget()},e.prototype.onCollisionStay=function(t,e){this.showTouchTarget()},e.prototype.onCollisionExit=function(t,e){t.node.opacity=255,this.canTouchGroup.splice(this.canTouchGroup.indexOf(t.node),1),this.showTouchTarget()},e=i([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter"}],head_item:[function(t,e,n){"use strict";cc._RF.push(e,"f820fthNSRGyptC8PwlOBIk","head_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./box_item"),a=t("../manager/json_manager"),c=cc._decorator,s=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockCount=0,e.atkTimer=null,e}return o(e,t),e.prototype.onCollisionEnter=function(t,e){var n=this;"boxItem"==t.node.name&&setTimeout(function(){n.blockCount+=1},1e3)},e.prototype.onCollisionStay=function(t,e){var n=this;if(0!=this.blockCount){if(this.atkTimer)return;this.atkTimer=setTimeout(function(){n.atkTimer=null},1e3*a.default.instance.getConfig("antAtkSpd")),t.node.getComponent(r.default).onAttacked()}},e.prototype.onCollisionExit=function(t,e){var n=this;"boxItem"==t.node.name&&setTimeout(function(){n.blockCount-=1},250)},e=i([s],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../manager/json_manager":"json_manager","./box_item":"box_item"}],ice_bullet_item:[function(t,e,n){"use strict";cc._RF.push(e,"fb61fx+i9pPbLL1mHlsxCSr","ice_bullet_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/main_manager"),a=t("../utils/enum"),c=cc._decorator,s=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=100,e.arr=null,e.particel=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e){this.node.position=t,this.arr=e.normalize(),this.node.angle=(e.y>0?1:-1)*e.angle(cc.v2(1,0))*180/Math.PI,this.node.getComponent(cc.BoxCollider).enabled=!0},e.prototype.update=function(t){r.default.instance.gameStatus==a.GameStatus.start&&(this.node.x+=this.arr.x*t*this.speed,this.node.y+=this.arr.y*t*this.speed)},e.prototype.onRemove=function(){setTimeout(function(){},500)},i([u(cc.ParticleSystem)],e.prototype,"particel",void 0),e=i([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../manager/main_manager":"main_manager","../utils/enum":"enum"}],ice_item:[function(t,e,n){"use strict";cc._RF.push(e,"0dc9eCVF69Pz7PR8WMTtNEv","ice_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/main_ui_manager"),a=t("../manager/main_manager"),c=t("../utils/enum"),s=t("./ant_item"),u=t("../manager/json_manager"),p=t("../manager/resouce_manager"),l=t("../manager/audio_manager"),f=cc._decorator,d=f.ccclass,m=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.range=150,e.particle=null,e.iceSprite=null,e.towerSp=null,e.attTimer=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){var e=this;this.iceSprite.spriteFrame=p.default.instance.getSprite(c.ResType.main,"ice1"),clearInterval(this.attTimer),this.node.setPosition(t),this.range=u.default.instance.getDataByName("tower")[3].range1,this.attTimer=setInterval(function(){if(a.default.instance.gameStatus==c.GameStatus.start&&e.node.getComponent(cc.BoxCollider).enabled&&e.node.parent==r.default.instance.towerParent){var t=e.findAnt();if(t){e.particle.resetSystem();var n=e.node.position.sub(t.position);e.particle.node.angle=(n.y>0?1:-1)*n.angle(cc.v2(1,0))*180/Math.PI+90,e.particle.node.angle<=315&&e.particle.node.angle>=225?e.iceSprite.spriteFrame=p.default.instance.getSprite(c.ResType.main,"ice4"):e.particle.node.angle<=135&&e.particle.node.angle>=45?e.iceSprite.spriteFrame=p.default.instance.getSprite(c.ResType.main,"ice3"):e.particle.node.angle<=225&&e.particle.node.angle>=135?e.iceSprite.spriteFrame=p.default.instance.getSprite(c.ResType.main,"ice1"):e.iceSprite.spriteFrame=p.default.instance.getSprite(c.ResType.main,"ice2"),e.findTargetRangeAnt(t.position).map(function(t){t.getComponent(s.default).antFreeze(),t.getComponent(s.default).hp-=u.default.instance.getDataByName("tower")[3].damage}),l.default.instance.playAudio("\u6c34\u67aa")}}},u.default.instance.getDataByName("tower")[3].atkSpd)},e.prototype.findTargetRangeAnt=function(t){for(var e=[],n=0;n<r.default.instance.antParent.children.length;n++){var o=r.default.instance.antParent.children[n];o.position.sub(t).mag()<u.default.instance.getDataByName("tower")[3].range2&&!o.getComponent(s.default).isDie&&e.push(o)}return e},e.prototype.findAnt=function(){for(var t=null,e=0;e<r.default.instance.antParent.children.length;e++){var n=r.default.instance.antParent.children[e],o=n.position.sub(this.node.position).mag();o<this.range&&!n.getComponent(s.default).isDie&&(t?t.position.sub(this.node.position).mag()>o&&(t=n):t=n)}return t},i([m(cc.ParticleSystem)],e.prototype,"particle",void 0),i([m(cc.Sprite)],e.prototype,"iceSprite",void 0),i([m(cc.Sprite)],e.prototype,"towerSp",void 0),e=i([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/enum":"enum","./ant_item":"ant_item"}],json_manager:[function(t,e,n){"use strict";cc._RF.push(e,"77abfUSMMJB74jHj5I3vCIe","json_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../config"),a=t("./resouce_manager"),c=t("../utils/emmiter"),s=t("../utils/message"),u=cc._decorator,p=u.ccclass,l=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Data=[],e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){for(var t=0;t<r.default.resConfig.jsonArr.length;t++)this._Data[t]=a.default.instance._Json[t].json;c.Emitter.fire("message_"+s.MessageType.jsonLoaded)},e.prototype.getDataByName=function(t){var e=r.default.resConfig.jsonArr.indexOf(t);if(-1!=e)return this._Data[e];console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e.prototype.getConfig=function(t){return this._Data[0][1][t]},e._instance=null,e=n=i([p],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resouce_manager":"resouce_manager"}],main_manager:[function(t,e,n){"use strict";cc._RF.push(e,"999bfq7w/xHQYtWqsUQsxm+","main_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../ui/main_ui_manager"),c=t("../utils/emmiter"),s=t("../utils/enum"),u=t("./audio_manager"),p=t("../ui/fail_ui_manager"),l=cc._decorator,f=l.ccclass;l.property;(function(t){t[t.up=0]="up",t[t.down=1]="down"})(r||(r={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rightArrowState=r.up,e.leftArrowState=r.up,e.upArrowState=r.up,e.downArrowState=r.up,e.gameStatus=s.GameStatus.unStart,e.warnTimer=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.setDesignResolution(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.director.getCollisionManager().enabled=!0,setTimeout(function(){u.default.instance.loadBGMClip("bgm\u66f4\u65b0")},100),c.Emitter.register("warning",this.onWarning,this)},e.prototype.setDesignResolution=function(){},e.prototype.update=function(t){this.rightArrowState==r.down&&this.leftArrowState==r.up&&c.Emitter.fire("rightArrowDown"),this.leftArrowState==r.down&&this.rightArrowState==r.up&&c.Emitter.fire("leftArrowDown"),this.upArrowState==r.down&&this.downArrowState==r.up&&c.Emitter.fire("upArrowDown"),this.downArrowState==r.down&&this.upArrowState==r.up&&c.Emitter.fire("downArrowDown"),this.rightArrowState==r.up&&this.leftArrowState!=r.down&&c.Emitter.fire("rightArrowUp"),this.leftArrowState==r.up&&this.rightArrowState!=r.down&&c.Emitter.fire("leftArrowUp"),this.upArrowState==r.up&&this.downArrowState!=r.down&&c.Emitter.fire("upArrowUp"),this.downArrowState==r.up&&this.upArrowState!=r.down&&c.Emitter.fire("downArrowUp")},e.prototype.startGame=function(){a.default.instance.init(),this.gameStatus=s.GameStatus.start},e.prototype.onFail=function(){console.log("\u6e38\u620f\u7ed3\u675f"),this.gameStatus=s.GameStatus.fail,a.default.instance.endGame(),u.default.instance.playAudio("\u6e38\u620f\u5931\u8d25")},e.prototype.onSuccess=function(t){console.log("\u6e38\u620f\u7ed3\u675f"),this.gameStatus=s.GameStatus.success,p.default.instance.onSuccess(t)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.right:this.rightArrowState=r.down;break;case cc.macro.KEY.left:this.leftArrowState=r.down;break;case cc.macro.KEY.up:this.upArrowState=r.down;break;case cc.macro.KEY.down:this.downArrowState=r.down;break;case cc.macro.KEY.z:c.Emitter.fire("pickUp")}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.right:this.rightArrowState=r.up;break;case cc.macro.KEY.left:this.leftArrowState=r.up;break;case cc.macro.KEY.up:this.upArrowState=r.up;break;case cc.macro.KEY.down:this.downArrowState=r.up}},e.prototype.onWarning=function(){var t=this;this.warnTimer||(this.warnTimer=setTimeout(function(){t.warnTimer=null},1500),u.default.instance.playAudio("\u8682\u8681\u9760\u8fd1\u63d0\u793a\u97f3\u6548"))},e.instance=null,e=n=i([f],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../ui/fail_ui_manager":"fail_ui_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum","./audio_manager":"audio_manager"}],main_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"d6f6bTNxOZBEIh4HP7nttpL","main_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/pool_manager"),a=t("../utils/emmiter"),c=t("../item/gap_item"),s=t("../item/player_item"),u=t("../item/box_item"),p=t("../utils/utils"),l=t("../item/turret_item"),f=t("./fail_ui_manager"),d=t("../item/ice_item"),m=t("../item/fire_item"),h=t("../item/grass_item"),_=t("../manager/json_manager"),y=t("../item/effect_item"),g=t("../item/prop_item"),v=t("../manager/main_manager"),b=cc._decorator,O=b.ccclass,P=b.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gapParent=null,e.antParent=null,e.boxParent=null,e.bulletParent=null,e.towerParent=null,e.player=null,e.hpNode=null,e.useBtn=null,e.effectParent=null,e.propParent=null,e.tipLabel=null,e.growGapTimer=null,e.itemGapTimer=null,e.tipTimer=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.player=cc.find("Canvas/gamePage/player").getComponent(s.default),this.useBtn.node.on("click",function(){a.Emitter.fire("pickUp")},this)},e.prototype.init=function(){var t=this;this.tipLabel.string="",this.removeAllItem(),this.player.init(),clearInterval(this.growGapTimer),this.growGapTimer=setInterval(function(){t.gapParent.children.length<20?r.default.instance.createObjectByName("gapItem",t.gapParent).getComponent(c.default).init():(clearInterval(t.growGapTimer),t.onProtectiveCloth())},1e3*_.default.instance.getConfig("gapGrowTime")),clearInterval(this.itemGapTimer),this.itemGapTimer=setInterval(function(){if(0==p.Utils.getRandomNumber(1)){r.default.instance.createObjectByName("boxItem",t.boxParent).getComponent(u.default).init()}else{var e=p.Utils.getRandomNumber(3),n=_.default.instance.getConfig("itemGenerateRange"),o=_.default.instance.getConfig("playerPosition"),i=cc.v2(0,0);i.x=p.Utils.getRandomNumber(n[0])-n[0]/2+o[0],i.y=p.Utils.getRandomNumber(n[1])-n[1]/2+o[1];var a=r.default.instance.createObjectByName("effectItem",t.effectParent);0==e?a.getComponent(y.default).init(i,function(){r.default.instance.createObjectByName("turrentItem",t.towerParent).getComponent(l.default).init(i),console.log("turrentItem")},"bag_turrentItem"):1==e?a.getComponent(y.default).init(i,function(){r.default.instance.createObjectByName("iceItem",t.towerParent).getComponent(d.default).init(i),console.log("iceItem")},"bag_iceItem"):2==e?a.getComponent(y.default).init(i,function(){r.default.instance.createObjectByName("fireItem",t.towerParent).getComponent(m.default).init(i),console.log("fireItem")},"bag_fireItem"):3==e&&a.getComponent(y.default).init(i,function(){r.default.instance.createObjectByName("grassItem",t.towerParent).getComponent(h.default).init(i),console.log("grassItem")},"bag_grassItem")}},1e3*_.default.instance.getConfig("gapGrowTime"))},e.prototype.showHp=function(t){this.hpNode.children.map(function(e,n){e.active=!1,n<t&&(e.active=!0)})},e.prototype.endGame=function(){clearInterval(this.growGapTimer),clearInterval(this.itemGapTimer),f.default.instance.onFail()},e.prototype.removeAllItem=function(){for(var t=this.gapParent.children,e=t.length-1;e>=0;e--)t[e].getComponent(c.default).isOn=!1,r.default.instance.removeObjectByName("gapItem",t[e]);var n=this.antParent.children;for(e=n.length-1;e>=0;e--)r.default.instance.removeObjectByName("antItem",n[e]);var o=this.bulletParent.children;for(e=o.length-1;e>=0;e--)r.default.instance.removeObjectByName("bulletItem",o[e]);var i=this.boxParent.children;for(e=i.length-1;e>=0;e--)r.default.instance.removeObjectByName("boxItem",i[e]);var a=this.effectParent.children;for(e=a.length-1;e>=0;e--)r.default.instance.removeObjectByName("effectItem",a[e]);var s=this.propParent.children;for(e=s.length-1;e>=0;e--)r.default.instance.removeObjectByName("propItem",s[e]);var u=this.towerParent.children;for(e=u.length-1;e>=0;e--)r.default.instance.removeObjectByName(u[e].name,u[e])},e.prototype.onProtectiveCloth=function(){var t=this,e=r.default.instance.createObjectByName("effectItem",this.effectParent);this.onTip("\u9632\u62a4\u670d\u51fa\u73b0\u4e86\uff01\u7a7f\u4e0a\u5b83\u9003\u51fa\u53bb"),e.getComponent(y.default).init(cc.v2(0,0),function(){r.default.instance.createObjectByName("propItem",t.propParent).getComponent(g.default).init(1,cc.v2(0,0))},"bag_success")},e.prototype.onTip=function(t){var e=this;this.tipLabel.string=t,clearTimeout(this.tipTimer),this.tipTimer=setTimeout(function(){e.tipLabel.string=""},3e3)},e.prototype.checkRealSuccess=function(){20==this.gapParent.children.length&&this.gapParent.children.every(function(t){return!t.getComponent(c.default).isOn})&&v.default.instance.onSuccess(1)},e.instance=null,i([P(cc.Node)],e.prototype,"gapParent",void 0),i([P(cc.Node)],e.prototype,"antParent",void 0),i([P(cc.Node)],e.prototype,"boxParent",void 0),i([P(cc.Node)],e.prototype,"bulletParent",void 0),i([P(cc.Node)],e.prototype,"towerParent",void 0),i([P(s.default)],e.prototype,"player",void 0),i([P(cc.Node)],e.prototype,"hpNode",void 0),i([P(cc.Button)],e.prototype,"useBtn",void 0),i([P(cc.Node)],e.prototype,"effectParent",void 0),i([P(cc.Node)],e.prototype,"propParent",void 0),i([P(cc.Label)],e.prototype,"tipLabel",void 0),e=n=i([O],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../item/box_item":"box_item","../item/effect_item":"effect_item","../item/fire_item":"fire_item","../item/gap_item":"gap_item","../item/grass_item":"grass_item","../item/ice_item":"ice_item","../item/player_item":"player_item","../item/prop_item":"prop_item","../item/turret_item":"turret_item","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../utils/emmiter":"emmiter","../utils/utils":"utils","./fail_ui_manager":"fail_ui_manager"}],messagebox_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"239d3PabMVOWJLVGNBpGBfl","messagebox_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiNode=null,e.maskNode=null,e.labelTitle=null,e.labelDesc=null,e.buttonCancel=null,e.buttonConfirm=null,e.curCallBack=null,e.curParam=null,e._isClick=!1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.buttonCancel.node.on("click",this.cancel,this),this.buttonConfirm.node.on("click",this.confirm,this),this.uiNode.active&&(this.uiNode.active=!1)},e.prototype.showUI=function(t,e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=!0),this.uiNode.active=!0,this.labelTitle.string=t,this.labelDesc.string=e,this.curCallBack=null!=n?n:null,this.curParam=o,this.buttonCancel.node.active=!!i},e.prototype.cancel=function(){null!=this.curCallBack&&this.curCallBack(!1,this.curParam),this.hideUI()},e.prototype.confirm=function(){this._isClick||(this._isClick=!0,this.scheduleOnce(function(){this._isClick=!1},.2),null!=this.curCallBack&&this.curCallBack(!0,this.curParam),this.hideUI())},e.prototype.hideUI=function(){this.uiNode.active=!1},e.instance=null,i([c(cc.Node)],e.prototype,"uiNode",void 0),i([c(cc.Node)],e.prototype,"maskNode",void 0),i([c(cc.Label)],e.prototype,"labelTitle",void 0),i([c(cc.Label)],e.prototype,"labelDesc",void 0),i([c(cc.Button)],e.prototype,"buttonCancel",void 0),i([c(cc.Button)],e.prototype,"buttonConfirm",void 0),e=n=i([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],message:[function(t,e,n){"use strict";cc._RF.push(e,"e57005/Hr1GRb7uaOOSoOTZ","message"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.atlasLoaded=1]="atlasLoaded",t[t.poolLoaded=2]="poolLoaded",t[t.jsonLoaded=3]="jsonLoaded"}(n.MessageType||(n.MessageType={})),cc._RF.pop()},{}],player_item:[function(t,e,n){"use strict";cc._RF.push(e,"020e2yObG9JoYhE3KpGgD1W","player_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../utils/emmiter"),c=t("../manager/main_manager"),s=t("../ui/main_ui_manager"),u=t("../manager/resouce_manager"),p=t("../utils/enum"),l=t("../../config"),f=t("../manager/json_manager"),d=t("../joystick/Joystick"),m=t("../manager/audio_manager"),h=cc._decorator,_=h.ccclass,y=h.property;(function(t){t[t.none=0]="none",t[t.up=1]="up",t[t.down=2]="down",t[t.left=3]="left",t[t.right=4]="right",t[t.upLeft=5]="upLeft",t[t.upRight=6]="upRight",t[t.downRight=8]="downRight",t[t.downLeft=7]="downLeft"})(r||(r={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.walkSoundTimer=null,e.speed=0,e.xHat=0,e.yHat=0,e.normalSpd=100,e.surrounding=null,e.holding=null,e.playerAnima=null,e._hp=3,e.camara=null,e.hand=null,e.react=[],e.isWechat=cc.sys.platform==cc.sys.WECHAT_GAME,e.animaName=[[],[]],e.moveDir=cc.v2(0,0),e.moveType=0,e.isProtect=0,e}return o(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){this.isProtect&&t<this._hp||(this._hp=t,s.default.instance.showHp(t),this.checkDie())},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.animaName=[["player_silder_run","player_idle"],["player_success_run","player_success_idle"]],a.Emitter.register("rightArrowDown",this.moveRight,this),a.Emitter.register("leftArrowDown",this.moveLeft,this),a.Emitter.register("upArrowDown",this.moveUp,this),a.Emitter.register("downArrowDown",this.moveDown,this),a.Emitter.register("rightArrowUp",this.xOnStay,this),a.Emitter.register("leftArrowUp",this.xOnStay,this),a.Emitter.register("upArrowUp",this.yOnStay,this),a.Emitter.register("downArrowUp",this.yOnStay,this),d.instance.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),d.instance.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),setTimeout(function(){u.default.instance.getAnimation("player_silder_run",l.default.aniConfig.player_silder_run).then(function(e){t.playerAnima.addClip(e)}),u.default.instance.getAnimation("player_idle",l.default.aniConfig.player_idle).then(function(e){t.playerAnima.addClip(e)}),u.default.instance.getAnimation("player_success_run",l.default.aniConfig.player_success_run).then(function(e){t.playerAnima.addClip(e)}),u.default.instance.getAnimation("player_success_idle",l.default.aniConfig.player_success_idle).then(function(e){t.playerAnima.addClip(e)})})},e.prototype.onTouchMove=function(t,e){this.moveType=e.speedType,this.moveDir=e.moveDistance},e.prototype.onTouchEnd=function(t,e){this.moveType=e.speedType,this.moveDir=cc.v2(0,0)},e.prototype.init=function(){this.isProtect=0,this.node.setPosition(f.default.instance.getConfig("playerPosition")[0],f.default.instance.getConfig("playerPosition")[1]),this.hp=3,this.normalSpd=f.default.instance.getConfig("playerSpd"),this.speed=this.normalSpd;var t=f.default.instance.getConfig("playerPosition"),e=f.default.instance.getConfig("canMoveRange");this.react=[e[1]/2+t[1]/2-93,-e[1]/2+t[1]/2+62,e[0]/2+t[0]/2-120,-e[0]/2+t[0]/2+120],console.log(this.react)},e.prototype.update=function(t){c.default.instance.gameStatus==p.GameStatus.start&&(this.isWechat&&null!=this.moveDir?(this.node.x+=this.moveDir.x*t*this.speed,this.node.y+=this.moveDir.y*t*this.speed,this.node.scaleX=this.moveDir.x>0?-1:1,0==this.moveDir.x&&0==this.moveDir.y||this.playerAnima.getAnimationState(this.animaName[this.isProtect][0]).isPlaying||this.playerAnima.play(this.animaName[this.isProtect][0]),0==this.moveType&&(this.playerAnima.getAnimationState(this.animaName[this.isProtect][1]).isPlaying||this.playerAnima.play(this.animaName[this.isProtect][1]))):(this.node.x+=this.xHat*this.speed*t,this.node.y+=this.yHat*this.speed*t,0==this.xHat&&0==this.yHat||this.playerAnima.getAnimationState(this.animaName[this.isProtect][0]).isPlaying||this.playerAnima.play(this.animaName[this.isProtect][0]),0==this.xHat&&0==this.yHat&&(this.playerAnima.getAnimationState(this.animaName[this.isProtect][1]).isPlaying||this.playerAnima.play(this.animaName[this.isProtect][1])),0!=this.xHat&&0!=this.yHat?this.speed=this.normalSpd/Math.sqrt(2):this.speed=this.normalSpd),this.node.x<this.react[3]&&(this.isProtect&&c.default.instance.onSuccess(0),this.node.x=this.react[3]),this.node.y>this.react[0]&&(this.isProtect&&c.default.instance.onSuccess(0),this.node.y=this.react[0]),this.node.x>this.react[2]&&(this.isProtect&&c.default.instance.onSuccess(0),this.node.x=this.react[2]),this.node.y<this.react[1]&&(this.isProtect&&c.default.instance.onSuccess(0),this.node.y=this.react[1]),this.camara.setPosition(this.node.position))},e.prototype.moveRight=function(){var t=this;this.xHat=1,this.node.scaleX=-1,this.walkSoundTimer||(this.walkSoundTimer=setTimeout(function(){t.walkSoundTimer=null},1500),m.default.instance.playAudio("\u811a\u6b65\u58f0"))},e.prototype.moveLeft=function(){var t=this;this.xHat=-1,this.node.scaleX=1,this.walkSoundTimer||(this.walkSoundTimer=setTimeout(function(){t.walkSoundTimer=null},1500),m.default.instance.playAudio("\u811a\u6b65\u58f0"))},e.prototype.moveUp=function(){var t=this;this.yHat=1,this.walkSoundTimer||(this.walkSoundTimer=setTimeout(function(){t.walkSoundTimer=null},1500),m.default.instance.playAudio("\u811a\u6b65\u58f0"))},e.prototype.moveDown=function(){var t=this;this.yHat=-1,this.walkSoundTimer||(this.walkSoundTimer=setTimeout(function(){t.walkSoundTimer=null},1500),m.default.instance.playAudio("\u811a\u6b65\u58f0"))},e.prototype.xOnStay=function(){this.xHat=0},e.prototype.yOnStay=function(){this.yHat=0},e.prototype.onCollisionEnter=function(t,e){"antItem"==t.node.name?(this.hp--,m.default.instance.playAudio("\u5973\u5b69\u53d7\u4f24")):t.node.name},e.prototype.onCollisionStay=function(t,e){if("boxItem"==t.node.name){var n=180*t.node.getPosition().sub(e.node.getPosition()).angle(cc.v2(1,0))/Math.PI;n>45&&n<135?this.node.y-t.node.y<t.node.height/2+this.node.height/2&&(this.node.y<t.node.y?this.node.y=t.node.y-t.node.height/2:this.node.y=t.node.y+t.node.height/2+this.node.height/2):this.node.x-t.node.x<t.node.width/2+this.node.width/2&&(this.node.x<t.node.x?this.node.x=t.node.x-t.node.width/2-this.node.width/2:this.node.x=t.node.x+t.node.width/2+this.node.width/2)}},e.prototype.onCollisionExit=function(t,e){},e.prototype.checkDie=function(){this.hp<=0&&c.default.instance.onFail()},e.prototype.onProtect=function(){this.isProtect=1,s.default.instance.onTip("\u8d70\u5411\u623f\u95f4\u8fb9\u7f18\u9003\u51fa\u623f\u95f4")},i([y(cc.Animation)],e.prototype,"playerAnima",void 0),i([y(cc.Node)],e.prototype,"camara",void 0),i([y(cc.Node)],e.prototype,"hand",void 0),e=i([_],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../config":"config","../joystick/Joystick":"Joystick","../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum"}],pool_manager:[function(t,e,n){"use strict";cc._RF.push(e,"8f7b3HT+t5GUqHoeKxyKxUp","pool_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../config"),a=t("./resouce_manager"),c=t("../utils/emmiter"),s=t("../utils/message"),u=cc._decorator,p=u.ccclass,l=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Pool=[],e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){for(var t=0;t<r.default.resConfig.prefabArr.length;t++){this._Pool[t]=new cc.NodePool;var e=cc.instantiate(a.default.instance._Prefab[t]);this._Pool[t].put(e)}c.Emitter.fire("message_"+s.MessageType.poolLoaded)},e.prototype.createObjectByName=function(t,e){void 0===e&&(e=null);var n=r.default.resConfig.prefabArr.indexOf(t);if(-1!=n){var o,i=a.default.instance._Prefab[n],c=this._Pool[n];return null!=c&&(o=c.size()>0?c.get():cc.instantiate(i),e&&(o.parent=e)),o}console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e.prototype.removeObjectByName=function(t,e){var n=r.default.resConfig.prefabArr.indexOf(t);if(-1!=n){var o=this._Pool[n];null!=o?o.put(e):console.error("no this pool:"+t)}else console.log("\u586b\u5199\u4e86\u9519\u8bef\u7684name",t)},e._instance=null,e=n=i([p],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./resouce_manager":"resouce_manager"}],prop_item:[function(t,e,n){"use strict";cc._RF.push(e,"decf9DbeVtP36iHQY+3BIvL","prop_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/main_ui_manager"),a=t("../manager/pool_manager"),c=t("../utils/enum"),s=t("../manager/resouce_manager"),u=cc._decorator,p=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propSp=null,e.type=0,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e){this.type=t;var n=0==t?"love":"successItem";this.node.scale=0==t?1:.7,this.propSp.spriteFrame=s.default.instance.getSprite(c.ResType.main,n),this.node.setPosition(e)},e.prototype.onCollisionEnter=function(t,e){if("player"==t.node.name)switch(this.type){case 0:r.default.instance.player.hp++,a.default.instance.removeObjectByName("propItem",this.node);break;case 1:r.default.instance.player.onProtect(),a.default.instance.removeObjectByName("propItem",this.node)}},i([l(cc.Sprite)],e.prototype,"propSp",void 0),e=i([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/pool_manager":"pool_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/enum":"enum"}],resouce_manager:[function(t,e,n){"use strict";cc._RF.push(e,"42f85+McylGCoytT6sxT/r3","resouce_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../config"),a=t("./json_manager"),c=t("./pool_manager"),s=t("../utils/emmiter"),u=t("../utils/message"),p=cc._decorator,l=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._Atlas=[],e._Json=[],e._Prefab=[],e._Animation={},e.loading=0,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,console.log("ResourceManager loading ..."),this.bindEvent();var t=r.default.resConfig.altasArr.map(function(t){return"atlas/"+t}),e=this;cc.loader.loadResArray(t,cc.SpriteAtlas,function(t,n){t?console.error(t):(e._Atlas=n,s.Emitter.fire("message_"+u.MessageType.atlasLoaded))});var o=r.default.resConfig.jsonArr.map(function(t){return"json/"+t});cc.loader.loadResArray(o,cc.JsonAsset,function(t,n){t?console.error(t):(e._Json=n,a.default.instance.init())});var i=r.default.resConfig.prefabArr.map(function(t){return"prefab/"+t});cc.loader.loadResArray(i,cc.Prefab,function(t,n){t?console.error(t):(e._Prefab=n,c.default.instance.init())})},e.prototype.bindEvent=function(){s.Emitter.register("message_"+u.MessageType.atlasLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.atlasLoaded,"")},""),s.Emitter.register("message_"+u.MessageType.poolLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.poolLoaded,"")},""),s.Emitter.register("message_"+u.MessageType.jsonLoaded,function(t,e){n.instance.loadedRes(),s.Emitter.remove("message_"+u.MessageType.jsonLoaded,"")},"")},e.prototype.loadedRes=function(){this.loading++,3==this.loading&&console.log("\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5")},e.prototype.getSprite=function(t,e){return this._Atlas[t]?this._Atlas[t].getSpriteFrame(e):null},e.prototype.getAnimation=function(t,e){var n=this;return new Promise(function(o,i){n._Animation[t]?o(n._Animation[t]):cc.loader.loadRes("animation/"+t,cc.SpriteAtlas,function(i,r){var a;if(i)console.error(i);else{var c=r.getSpriteFrames(),s=cc.AnimationClip.createWithSpriteFrames(c,c.length);s.name=t,s.sample=e.sample,s.speed=e.speed,s.wrapMode=e.wrapMode,e.funcs&&(a=s.events).push.apply(a,e.funcs),n._Animation[t]=s,o(s)}})})},e.instance=null,e=n=i([l],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../../config":"config","../utils/emmiter":"emmiter","../utils/message":"message","./json_manager":"json_manager","./pool_manager":"pool_manager"}],start_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"0b7ebJAixROhLMJck6NLZDj","start_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/main_manager"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startBtn=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.startBtn.node.on("click",this.onGameStart,this)},e.prototype.onGameStart=function(){this.node.active=!1,r.default.instance.startGame()},e.instance=null,i([s(cc.Button)],e.prototype,"startBtn",void 0),e=n=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../manager/main_manager":"main_manager"}],tips_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"6b4009mxKhKIIMDg4O54np/","tips_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelDesc=null,e.contentNode=null,e.labelDesc2=null,e.contentNode2=null,e.labelDesc3=null,e.contentNode3=null,e.curShowIndex=1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.contentNode.opacity=0,this.contentNode2.opacity=0,this.contentNode3.opacity=0},e.prototype.showTipsByStr=function(t){this.showTipByIndex(t)},e.prototype.showTipByIndex=function(t){var e=cc.sequence(cc.delayTime(1.2),cc.fadeOut(.3));1==this.curShowIndex?(this.labelDesc.string=t,this.contentNode.stopAllActions(),this.contentNode.opacity=255,this.contentNode.runAction(e)):2==this.curShowIndex?(this.labelDesc2.string=t,this.contentNode2.stopAllActions(),this.contentNode2.opacity=255,this.contentNode2.runAction(e)):3==this.curShowIndex&&(this.labelDesc3.string=t,this.contentNode3.stopAllActions(),this.contentNode3.opacity=255,this.contentNode3.runAction(e)),this.curShowIndex++,this.curShowIndex>3&&(this.curShowIndex=1)},e.instance=null,i([c(cc.Label)],e.prototype,"labelDesc",void 0),i([c(cc.Node)],e.prototype,"contentNode",void 0),i([c(cc.Label)],e.prototype,"labelDesc2",void 0),i([c(cc.Node)],e.prototype,"contentNode2",void 0),i([c(cc.Label)],e.prototype,"labelDesc3",void 0),i([c(cc.Node)],e.prototype,"contentNode3",void 0),e=n=i([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],turret_item:[function(t,e,n){"use strict";cc._RF.push(e,"2fb7c1OfZBDBINjCMHZhW7i","turret_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/emmiter"),a=t("../ui/main_ui_manager"),c=t("../manager/pool_manager"),s=t("./bullet_item"),u=t("../manager/main_manager"),p=t("../utils/enum"),l=t("./ant_item"),f=t("../manager/json_manager"),d=t("../manager/resouce_manager"),m=t("../manager/audio_manager"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.turretSprite=null,e.range=200,e.attTimer=null,e}return o(e,t),e.prototype.onLoad=function(){r.Emitter.register("pickUpTurret",this.onPickUp,this)},e.prototype.init=function(t){var e=this;this.turretSprite.spriteFrame=d.default.instance.getSprite(p.ResType.main,"turrent1"),this.node.scaleX=1,clearInterval(this.attTimer),this.node.setPosition(t),this.range=f.default.instance.getDataByName("tower")[1].range1,this.attTimer=setInterval(function(){if(u.default.instance.gameStatus==p.GameStatus.start&&e.node.getComponent(cc.BoxCollider).enabled&&e.node.parent==a.default.instance.towerParent){var t=e.findAnt();if(t){var n=c.default.instance.createObjectByName("bulletItem",a.default.instance.bulletParent),o=t.position.sub(e.node.position);n.getComponent(s.default).init(e.node.position,o);var i=((o=o.normalize()).y>0?1:-1)*o.angle(cc.v2(1,0))*180/Math.PI;i<=45&&i>=-45?(e.turretSprite.spriteFrame=d.default.instance.getSprite(p.ResType.main,"turrent2"),e.node.scaleX=-1):i<=135&&i>=45?e.turretSprite.spriteFrame=d.default.instance.getSprite(p.ResType.main,"turrent3"):i<=-45&&i>=-135?e.turretSprite.spriteFrame=d.default.instance.getSprite(p.ResType.main,"turrent1"):(e.turretSprite.spriteFrame=d.default.instance.getSprite(p.ResType.main,"turrent2"),e.node.scaleX=1),m.default.instance.playAudio("\u666e\u901a\u70ae\u5854")}}},500)},e.prototype.findAnt=function(){for(var t=null,e=0;e<a.default.instance.antParent.children.length;e++){var n=a.default.instance.antParent.children[e],o=n.position.sub(this.node.position).mag();o<this.range&&!n.getComponent(l.default).isDie&&(t?t.position.sub(this.node.position).mag()>o&&(t=n):t=n)}return t},e.prototype.onPickUp=function(){this.node.setParent(a.default.instance.player.hand),this.node.setPosition(0,0)},i([y(cc.Sprite)],e.prototype,"turretSprite",void 0),e=i([_],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../manager/audio_manager":"audio_manager","../manager/json_manager":"json_manager","../manager/main_manager":"main_manager","../manager/pool_manager":"pool_manager","../manager/resouce_manager":"resouce_manager","../ui/main_ui_manager":"main_ui_manager","../utils/emmiter":"emmiter","../utils/enum":"enum","./ant_item":"ant_item","./bullet_item":"bullet_item"}],ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"a70dcR6WJNEgZK++h1X0Vqy","ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/messagebox_ui_manager"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keyLock={},e.keyLoadTime={},e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),e.prototype.loadUIRes=function(t,e,o){null==n.instance.keyLock[t]&&(n.instance.keyLock[t]=!1),0==n.instance.keyLock[t]&&(n.instance.keyLock[t]=!0,cc.loader.loadRes(t,cc.Prefab,function(i,r){if(null==i){var a=cc.instantiate(r);cc.director.getScene().getChildByName("Canvas").addChild(a,e),o(),n.instance.keyLoadTime[t]&&delete n.instance.keyLoadTime[t],delete n.instance.keyLock[t]}else console.error("\u52a0\u8f7d\u5931\u8d25",i,t),n.instance.keyLock[t]=!1}))},e.prototype.updateLoadTime=function(t){for(var e in this.keyLock)1==this.keyLock[e]&&(null==this.keyLoadTime[e]&&(this.keyLoadTime[e]=0),-1!=this.keyLoadTime[e]&&(this.keyLoadTime[e]+=t,this.keyLoadTime[e]>1&&this.keyLoadTime[e]<5||this.keyLoadTime[e]>5&&(this.keyLoadTime[e]=-1)))},e.prototype.checkUIIsOpen=function(t){return t.instance&&t.instance.content.active},e.prototype.openUI=function(t,e,o){var i;void 0===o&&(o=n.Z_ORDER_2),t.instance?(i=t.instance).showUI.apply(i,e.param):this.loadUIRes("ui/"+e.name,o,function(){var n;(n=t.instance).showUI.apply(n,e.param)})},e.prototype.LoadMessageBox=function(t,e,o,i,a){void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=!0),r.default.instance?r.default.instance.showUI(t,e,o,i,a):this.loadUIRes("ui/message_ui",n.Z_ORDER_4+1,function(){r.default.instance.showUI(t,e,o,i,a)})},e._instance=null,e.Z_ORDER_1=100,e.Z_ORDER_2=200,e.Z_ORDER_3=300,e.Z_ORDER_4=400,e.Z_ORDER_5=500,e.Z_ORDER_6=600,e=n=i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../ui/messagebox_ui_manager":"messagebox_ui_manager"}],utils:[function(t,e,n){"use strict";cc._RF.push(e,"b15dajOG6hAbLOIhxSqE9Zp","utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.deepCopy=function(t){var e=Array.isArray(t)?[]:{};for(var n in t)t.hasOwnProperty(n)&&("object"==typeof t[n]&&null!==t[n]?e[n]=this.deepCopy(t[n]):e[n]=t[n]);return e},t.arrFind=function(t,e,n){for(var o=0,i=t.length;o<i;o++)if(t[o][e]==n)return[t[o],o]},t.getPercentStr=function(t){var e=Number(100*t).toFixed(2);return e+="%"},t.orderBy=function(e,n){if(e.length<=1)return e;for(var o=Math.floor(e.length/2),i=e.splice(o,1)[0],r=[],a=[],c=0,s=e;c<s.length;c++){var u=s[c];n(u)<n(i)?r.push(u):a.push(u)}return t.orderBy(r,n).concat([i],t.orderBy(a,n))},t.getRandomNumber=function(t){return Math.floor(Math.random()*(t+1))},t.getLocalTime=function(t){var e={},n=new Date(1e3*t);return e.y=n.getFullYear(),e.m=n.getMonth()+1,e.d=n.getDate(),e},t.getJsonLength=function(t){var e=0;for(var n in t)e++;return e},t.printObj=function(t){var e="";for(var n in t){e+=n+" = "+t[n]+"\n"}console.log(e)},t.isContain=function(t,e){if(null!=t&&t.indexOf(e)>-1)return!0;return!1},t.isIn=function(t,e){if(null!=t)for(var n in t)if(t[n]==e)return n;return!1},t.getLargeNumStr=function(t){return t>=99999999?(t/1e8).toFixed(2)+"\u4ebf":t>=1e4?(t/1e4).toFixed(2)+"\u4e07":Math.floor(t).toString()},t.getTimeFormat=function(t){if(t<0)return"00:00";var e=Math.floor(t/60),n=Math.floor(t-60*e);return e<10&&n<10?"0"+e.toString()+":0"+n.toString():e<10&&n>=10?"0"+e.toString()+":"+n.toString():e>=10&&n<10?e.toString()+":0"+n.toString():e>=10&&n>=10?e.toString()+":"+n.toString():"00:00"},t.getTimeFromNowStr=function(t){if(t<=60)return"\u521a\u521a";var e=Math.floor(t/60),n=Math.floor(t/3600),o=Math.floor(t/84600);return o>=1?o+"\u5929\u4ee5\u524d":n>=1?n+"\u5c0f\u65f6\u4ee5\u524d":e>=1?e+"\u5206\u4ee5\u524d":void 0},t.shuffle=function(t){for(var e,n,o=t.length;o;)n=Math.floor(Math.random()*o--),e=t[o],t[o]=t[n],t[n]=e;return t},t.debounce=function(t,e){var n;return function(){var o=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(o,i)},e)}},t.throttle=function(t,e){var n;return function(){var o=this,i=arguments;n||(n=setTimeout(function(){t.apply(o,i),n=null},e))}},t}();n.Utils=o,cc._RF.pop()},{}],way_point_item:[function(t,e,n){"use strict";cc._RF.push(e,"8b5c2xRoBhEnbmwDnOgsmJI","way_point_item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aroundPointNode=[],e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){},i([c(n)],e.prototype,"aroundPointNode",void 0),e=n=i([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],way_point_manager:[function(t,e,n){"use strict";cc._RF.push(e,"3553bihqONJ4LbKFynvbMaj","way_point_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../item/player_item"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wayPointData=[],e.player=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){this.wayPointData=[],n.instance=this,this.player=cc.find("Canvas/gamePage/player").getComponent(r.default),this.init()},e.prototype.init=function(){this.wayPointData=[{pos:cc.v2(300,-100),around:[2,1],index:0},{pos:cc.v2(0,0),around:[0,2],index:1},{pos:cc.v2(0,-100),around:[0,1],index:2}]},e.prototype.findWay=function(t,e){var n=this.findNearPoint(this.player.node.position),o=this.findNearPoint(t);n==o?e(null):this.wayPointFind(o,n.index,[o.index],e)},e.prototype.findNearPoint=function(t){for(var e=null,n=0;n<this.wayPointData.length;n++)e?e.pos.sub(t).mag()>this.wayPointData[n].pos.sub(t).mag()&&(e=this.wayPointData[n]):e=this.wayPointData[n];return e},e.prototype.wayPointFind=function(t,e,o,i){if(t.index==e)i(o);else for(var r=function(r){if(o.some(function(e){return e==t.around[r]}))return console.log("\u8d70\u4e86\u7ecf\u8fc7\u7684\u8def",o,t.around[r]),"continue";n.instance.wayPointFind(a.wayPointData[t.around[r]],e,o.concat([t.around[r]]),i)},a=this,c=0;c<t.around.length;c++)r(c)},e.instance=null,e=n=i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"../item/player_item":"player_item"}],way_point:[function(t,e,n){"use strict";cc._RF.push(e,"b4ad5ciriBOQ5mze2rvNCG2","way_point"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],win_ui_manager:[function(t,e,n){"use strict";cc._RF.push(e,"ac51fPOIjJMq7Hxvy1efZLg","win_ui_manager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.node.active=!1},e.prototype.onFail=function(){this.node.active=!0},e.instance=null,e=n=i([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}]},{},["config","way_point","ant_item","box_item","bullet_item","effect_item","fire_item","gap_item","grass_item","hand_item","head_item","ice_bullet_item","ice_item","player_item","prop_item","turret_item","way_point_item","Joystick","action_manager","audio_manager","dynamic_data_manager","guide_manager","json_manager","main_manager","pool_manager","resouce_manager","ui_manager","way_point_manager","fail_ui_manager","guide_ui_manager","main_ui_manager","messagebox_ui_manager","start_ui_manager","tips_ui_manager","win_ui_manager","emmiter","enum","message","utils"]);